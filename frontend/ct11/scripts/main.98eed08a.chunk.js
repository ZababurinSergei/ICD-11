!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define("ECT",[],t):"object"===typeof exports?exports.ECT=t():e.ECT=t()}(this,(function(){return(this.webpackJsonpect=this.webpackJsonpect||[]).push([[0],{689:function(e,t,i){},690:function(e,t,i){"use strict";i.r(t),i.d(t,"Settings",(function(){return be})),i.d(t,"Handler",(function(){return ye}));i(265),i(269),i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(292),i(293),i(109),i(294),i(295),i(296),i(297),i(298),i(299),i(300),i(301),i(302),i(303),i(304),i(305),i(306),i(308),i(309),i(310),i(156),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(340),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(362),i(363),i(364),i(365),i(369),i(370),i(371),i(373),i(374),i(375),i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(207),i(386),i(387),i(388),i(389),i(390),i(391),i(392),i(209),i(393),i(394),i(395),i(396),i(397),i(398),i(399),i(400),i(401),i(402),i(403),i(404),i(405),i(406),i(407),i(408),i(409),i(410),i(411),i(412),i(413),i(414),i(415),i(416),i(417),i(418),i(422),i(423),i(424),i(425),i(426),i(427),i(428),i(429),i(430),i(431),i(432),i(433),i(436),i(437),i(438),i(439),i(440),i(441),i(442),i(443),i(444),i(445),i(446),i(447),i(448),i(449),i(450),i(451),i(452),i(453),i(454),i(455),i(456),i(167),i(457),i(458),i(464),i(465),i(466),i(467),i(468),i(470),i(471),i(472),i(473),i(474),i(475),i(476),i(477),i(479),i(480),i(481),i(482),i(483),i(484),i(485),i(486),i(487),i(488),i(489),i(490),i(491),i(492),i(493),i(494),i(495),i(496),i(497),i(498),i(499),i(500),i(501),i(502),i(503),i(505),i(507),i(508),i(509),i(510),i(511),i(513),i(514),i(515),i(516),i(517),i(518),i(519),i(520),i(521),i(522),i(523),i(524),i(525),i(526),i(527),i(528),i(529),i(530),i(531),i(532),i(533),i(534),i(535),i(536),i(537),i(538),i(540),i(542),i(543),i(544),i(545),i(546),i(547),i(548),i(549),i(550),i(551),i(552),i(554),i(555),i(556),i(557),i(559),i(224);var s,n,o,r,a=i(2),c=i.n(a),d=i(5),l=i(11),h=i(10),p=i(18),u=i(174),v=i(3);!function(e){e[e.Real=0]="Real",e[e.UnderShoreLineLogicallyDefined=1]="UnderShoreLineLogicallyDefined",e[e.PostCoordinationCombination=2]="PostCoordinationCombination"}(s||(s={})),function(e){e[e.Real=0]="Real",e[e.UnderShoreLine=1]="UnderShoreLine",e[e.UnderShoreLineLogicallyDefined=2]="UnderShoreLineLogicallyDefined",e[e.PostCoordinationCombination=3]="PostCoordinationCombination"}(n||(n={})),function(e){e[e.NotAllowed=0]="NotAllowed",e[e.Allowed=1]="Allowed",e[e.Required=2]="Required"}(o||(o={})),function(e){e[e.noError=0]="noError",e[e.default=1]="default"}(r||(r={}));var m=function(){function e(){Object(h.a)(this,e),this.token="",this.tokenExpirationDate=new Date(0)}return Object(l.a)(e,[{key:"call",value:function(){var t=Object(d.a)(c.a.mark((function t(s){var n,o,r,a,d,l,h,p,u,v,m,b=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=b.length>1&&void 0!==b[1]?b[1]:"GET",o=b.length>2?b[2]:void 0,a=new Headers({Accept:"application/json","Accept-Language":e.language,"API-Version":e.apiVersion}),!0!==e.secured){t.next=17;break}if(!(Date.now()>this.tokenExpirationDate.getTime())){t.next=16;break}if(void 0===ye.getNewTokenFunction){t.next=16;break}return t.next=8,ye.getNewTokenFunction();case 8:d=t.sent,this.token=d,l=i(566),h=l(d),p=h.exp,p-=300,p*=1e3,this.tokenExpirationDate=new Date(p);case 16:a.append("Authorization","Bearer "+this.token);case 17:return u={method:n,headers:a,cache:"default"},void 0!==o&&("GET"===n&&"string"===typeof o?s+="?"+o:"POST"===n&&o instanceof FormData&&(u.body=o)),t.prev=19,t.next=22,fetch(s,u);case 22:return v=t.sent,t.next=25,v.json();case 25:if(r=t.sent,r=this.formatURIs(r),!1!==e.searchMethodIsInitialized){t.next=34;break}return e.searchMethodIsInitialized=!0,t.next=31,v.headers.get("API-Version");case 31:null!==(m=t.sent)&&(m=m.substr(1),1===e.semVerCompare(m,"2.0.0")?e.searchMethod="POST":e.searchMethod="GET"),console.log("searchMethod set to: "+e.searchMethod);case 34:t.next=44;break;case 36:return t.prev=36,t.t0=t.catch(19),console.warn("ICD-API Response Error. Trying second call for: "+s),t.next=41,e.timeout(1e3);case 41:return t.next=43,this.secondCall(s,a,n);case 43:r=t.sent;case 44:return t.abrupt("return",r);case 45:case"end":return t.stop()}}),t,this,[[19,36]])})));return function(e){return t.apply(this,arguments)}}()},{key:"secondCall",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i,s){var n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={method:s,headers:i,cache:"reload"},e.prev=1,e.next=4,fetch(t,o);case 4:return r=e.sent,e.next=7,r.json();case 7:n=e.sent,n=this.formatURIs(n),e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(1),console.error("ICD-API Error message [during 2nd call]:"),console.log(e.t0),e.t0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(t,i,s){return e.apply(this,arguments)}}()},{key:"postAnalytics",value:function(){var t=Object(d.a)(c.a.mark((function t(i,s){var n,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Headers({"Content-Type":"application/json"}),!0===e.secured&&n.append("Authorization","Bearer "+this.token),o={method:"POST",headers:n,body:JSON.stringify(s)},t.prev=3,t.next=6,fetch(i,o);case 6:t.next=13;break;case 8:throw t.prev=8,t.t0=t.catch(3),console.log("POST Error message:"),console.log(t.t0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[3,8]])})));return function(e,i){return t.apply(this,arguments)}}()},{key:"formatURIs",value:function(t){return void 0!==t.child&&t.child.forEach((function(i,s){void 0!==t.child&&void 0!==t.child[s]&&(t.child[s]=v.replace(t.child[s],e.domain,e.customDomain))})),void 0!==t.parent&&t.parent.forEach((function(i,s){void 0!==t.parent&&void 0!==t.parent[s]&&(t.parent[s]=v.replace(t.parent[s],e.domain,e.customDomain))})),t}}],[{key:"setSecured",value:function(t){e.secured=t}},{key:"setLanguage",value:function(t){v.isEmpty(t)||(e.language=t)}},{key:"setServerUrl",value:function(t){v.isEmpty(t)||(t=v.trim(t),t=v.trim(t,"/"),e.customDomain=t,e.uri=v.replace(e.uri,e.domain,e.customDomain))}},{key:"setLinearization",value:function(t){v.isEmpty(t)||((t=v.trim(t))===e.foundation?e.foundationCodingTool=!0:(e.customLinearization=t,e.uri=v.replace(e.uri,"mms",e.customLinearization)))}},{key:"setMinorVersion",value:function(t){!0===e.foundationCodingTool?e.uri=v.replace(e.uri,"release/11/mms","entity"):v.isEmpty(t)||(t=v.trim(t),e.customMinorVersion=t,e.uri=v.replace(e.uri,"release/11","release/11/"+e.customMinorVersion))}},{key:"setLastMinorVersion",value:function(){var t=Object(d.a)(c.a.mark((function t(){var i,s,n,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!1!==e.minorVersionIsInitialized){t.next=7;break}return i=e.getInstance(),t.next=5,i.call(e.uri);case 5:void 0!==(s=t.sent).latestRelease&&void 0!==(n=s.latestRelease.split("/"))[n.length-2]&&(o=n[n.length-2],console.log("setting the last minor version: "+o),e.setMinorVersion(o),e.minorVersionIsInitialized=!0,e.minorVersionIsBeingInitialized=!1);case 7:t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),e.minorVersionIsInitialized=!0,e.minorVersionIsBeingInitialized=!1,console.error("ICD-API Error when setting the last minor version"),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()},{key:"setSourceApp",value:function(t){v.isEmpty(t)||(e.sourceApp=t)}},{key:"setApiInitializationCompleted",value:function(){this.apiInitializationCompleted=!0}},{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}},{key:"getRootUri",value:function(){return e.uri}},{key:"isFoundationCodingTool",value:function(){return e.foundationCodingTool}},{key:"getApiInitializationCompleted",value:function(){return this.apiInitializationCompleted}},{key:"sendAnalytics",value:function(){var t=Object(d.a)(c.a.mark((function t(i,s,n,o,r){var a,d,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.customDomain+"/analytics/clientanalytics",d={uniqueSearchId:i,code:s,uri:n,bestMatchingText:o,selectedSearchResultEntityType:r,sourceApp:e.sourceApp},l=e.getInstance(),t.next=5,l.postAnalytics(a,d);case 5:case"end":return t.stop()}}),t)})));return function(e,i,s,n,o){return t.apply(this,arguments)}}()},{key:"getTheURI",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=e.uri),""!==e.customMinorVersion||!1!==e.isFoundationCodingTool()){t.next=9;break}!1===e.minorVersionIsBeingInitialized&&!1===e.minorVersionIsInitialized&&(e.minorVersionIsBeingInitialized=!0,e.setLastMinorVersion());case 3:if(!0!==e.minorVersionIsBeingInitialized||!1!==e.minorVersionIsInitialized){t.next=9;break}return console.log("waiting for setting the last minor version"),t.next=7,e.timeout(300);case 7:t.next=3;break;case 9:return i=v.trim(i),s=this.getNumberAtTheEnd(i),n="",""!==s&&(isNaN(s)||(n="/"+s,this.isEntityResidualOther(i)?n+="/other":this.isEntityResidualUnspecified(i)&&(n+="/unspecified"))),i=e.uri+n,t.abrupt("return",i);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getICDAPIEntity",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTheURI(i);case 2:if(i=t.sent,void 0===e.ICDAPIEntitiesCache[i]){t.next=7;break}return t.abrupt("return",e.ICDAPIEntitiesCache[i]);case 7:return s=e.getInstance(),t.next=10,s.call(i);case 10:return void 0!==(n=t.sent)&&(n.uri=i,e.ICDAPIEntitiesCache[i]=n),t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getICDAPICode",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTheURI();case 2:if(s=(s=t.sent)+"/codeinfo/"+encodeURIComponent(i),void 0===e.ICDAPICodeCache[i]){t.next=8;break}return t.abrupt("return",e.ICDAPICodeCache[i]);case 8:return n=e.getInstance(),t.next=11,n.call(s);case 11:return void 0!==(o=t.sent)&&(e.ICDAPICodeCache[i]=o),t.abrupt("return",o);case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getICDAPILookup",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n,o,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTheURI();case 2:if(s=t.sent,s+="/lookup",void 0===e.ICDAPILookupCache[i]){t.next=8;break}return t.abrupt("return",e.ICDAPILookupCache[i]);case 8:return n="foundationUri="+encodeURIComponent(i),o=e.getInstance(),t.next=12,o.call(s,"GET",n);case 12:return void 0!==(r=t.sent)&&(r.uri=r["@id"],e.ICDAPILookupCache[i]=r),t.abrupt("return",r);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"search",value:function(){var t=Object(d.a)(c.a.mark((function t(i,s,n,o,r,a,d,l,h,p,u){var m,b,y,f,x,g,C,j;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getTheURI();case 2:if(m=t.sent,m+="/search",void 0!==d&&!0===d&&(l=!1,i=v.trimEnd(i,"%"),i=v.trimEnd(i,"%25")),void 0!==u&&!1===u&&(h=!1),y=new FormData,f="",y.append("q",i),f="q="+encodeURIComponent(i),void 0!==s&&(y.append("chapterFilter",s),f+="&chapterFilter="+s),void 0!==n){if(n instanceof Array){for(x=0;x<n.length;x++)n[x]=e.getSubtreesFilterURI(n[x]);g=v.join(n,","),y.append("subtreesFilter",g),f+="&subtreesFilter="+encodeURIComponent(g)}else y.append("subtreesFilter",n),f+="&subtreesFilter="+encodeURIComponent(n);void 0!==o&&(y.append("subtreeFilterUsesFoundationDescendants",o.toString()),f+="&subtreeFilterUsesFoundationDescendants="+o)}return void 0!==r&&(y.append("includePostcoordination",r.toString()),f+="&includePostcoordination="+r),void 0!==a&&(y.append("useBroaderSynonyms",a.toString()),f+="&useBroaderSynonyms="+a),void 0!==d&&(y.append("useFlexiSearch",d.toString()),f+="&useFlexiSearch="+d),void 0!==l&&(y.append("includeKeywordResult",l.toString()),f+="&includeKeywordResult="+l),void 0!==h&&(y.append("flatResults",h.toString()),f+="&flatResults="+h),void 0!==p&&(y.append("highlightingEnabled",p.toString()),f+="&highlightingEnabled="+p),void 0!==u&&(y.append("codingStyleSearch",u.toString()),f+="&codingStyleSearch="+u),b="POST"===e.searchMethod?y:f,C=e.getInstance(),t.next=23,C.call(m,e.searchMethod,b);case 23:return j=t.sent,t.abrupt("return",j);case 25:case"end":return t.stop()}}),t,this)})));return function(e,i,s,n,o,r,a,c,d,l,h){return t.apply(this,arguments)}}()},{key:"getLinearizationAncestors",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n,o,r,a,d=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=d.length>1&&void 0!==d[1]&&d[1],n=[],o=i,r=!1===s?0:1;case 4:if(""===o){t.next=12;break}return t.next=7,e.getICDAPIEntity(o);case 7:void 0!==(a=t.sent)?(r>0&&n.push(a),o=void 0!==a.parent&&a.parent.length>0?a.parent[0]:""):o="",r++,t.next=4;break;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLinearizationAncestorsURI",value:function(){var t=Object(d.a)(c.a.mark((function t(i){var s,n,o=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.length>1&&void 0!==o[1]&&o[1],n=[],t.next=4,e.getLinearizationAncestors(i,s);case 4:return t.sent.forEach((function(e){void 0!==e.uri&&n.push(e.uri)})),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"convertInDomainURI",value:function(t){return""!==e.customDomain&&(t=v.replace(t,e.customDomain,e.domain)),""!==e.customMinorVersion&&-1===t.indexOf(e.customMinorVersion)&&(t=v.replace(t,"release/11","release/11/"+e.customMinorVersion)),t}},{key:"convertInCustomDomainURI",value:function(t){return t=v.replace(t,e.domain,e.customDomain)}},{key:"getMultilingualValue",value:function(e){var t="";return void 0!==e&&(t=void 0!==e["@value"]?e["@value"]:""),t}},{key:"isEntityResidualOther",value:function(e){return-1!==e.indexOf("other")}},{key:"isEntityResidualUnspecified",value:function(e){return-1!==e.indexOf("unspecified")}},{key:"isEntityResidual",value:function(e){return this.isEntityResidualOther(e)||this.isEntityResidualUnspecified(e)}},{key:"usesBetaMinorVersion",value:function(){return"beta"===e.customMinorVersion}},{key:"getNumberAtTheEnd",value:function(e){this.isEntityResidualOther(e)&&(e=e.replace("/other","")),this.isEntityResidualUnspecified(e)&&(e=e.replace("/unspecified",""));var t=e.split("/");return t.length>0&&void 0!==t[t.length-1]?t[t.length-1]:""}},{key:"getSubtreesFilterURI",value:function(e){var t="";return this.isEntityResidualOther(e)&&(t="/other"),this.isEntityResidualUnspecified(e)&&(t="/unspecified"),"http://id.who.int/icd/entity/"+this.getNumberAtTheEnd(e)+t}},{key:"convertAllInFoudationURI",value:function(t){var i=e.customDomain+"/icd/release/11/"+e.customMinorVersion+"/"+e.customLinearization,s=e.domain+"/icd/release/11/"+e.customMinorVersion+"/"+e.customLinearization,n="http://id.who.int/icd/entity",o=t;return o=v.replace(o,new RegExp("/other","g"),""),o=v.replace(o,new RegExp("/unspecified","g"),""),o=v.replace(o,new RegExp(i,"g"),n),o=v.replace(o,new RegExp(s,"g"),n)}},{key:"convertLinearizationEntityToDestinationEntity",value:function(t,i){var n=o.NotAllowed;return void 0!==t.postcoordinationScale&&t.postcoordinationScale.length>0&&(n=o.Allowed,void 0!==v.find(t.postcoordinationScale,{requiredPostcoordination:"true"})&&(n=o.Required)),{id:e.convertInDomainURI(i),title:e.getMultilingualValue(t.title),propertiesTruncated:!1,isResidualOther:e.isEntityResidualOther(i),isResidualUnspecified:e.isEntityResidualUnspecified(i),chapter:"",theCode:void 0!==t.code?t.code:"",score:0,titleIsASearchResult:!1,titleIsTopScore:!1,entityType:s.Real,important:!1,descendants:[],stemId:e.convertInDomainURI(i),isLeaf:!1,postcoordinationAvailability:n,hasCodingNote:void 0!==t.codingNote,hasMaternalChapterLink:void 0!==t.relatedEntitiesInMaternalChapter&&t.relatedEntitiesInMaternalChapter.length>0,hasPerinatalChapterLink:void 0!==t.relatedEntitiesInPerinatalChapter&&t.relatedEntitiesInPerinatalChapter.length>0,matchingPVs:[]}}},{key:"semVerCompare",value:function(e,t){for(var i=e.split("."),s=t.split("."),n=0;n<3;n++){var o=Number(i[n]),r=Number(s[n]);if(o>r)return 1;if(r>o)return-1;if(!isNaN(o)&&isNaN(r))return 1;if(isNaN(o)&&!isNaN(r))return-1}return 0}}]),e}();m.allowCustomSettings=!0,m.instance=void 0,m.domain="http://id.who.int",m.uri=m.domain+"/icd/release/11/mms",m.foundation="foundation",m.foundationCodingTool=!1,m.secured=!0,m.language="en",m.apiVersion="v2",m.customDomain="",m.customMinorVersion="",m.customLinearization="",m.minorVersionIsBeingInitialized=!1,m.minorVersionIsInitialized=!1,m.sourceApp="",m.ICDAPIEntitiesCache={},m.ICDAPICodeCache={},m.ICDAPILookupCache={},m.searchMethodIsInitialized=!1,m.searchMethod="POST",m.apiInitializationCompleted=!1;var b=m,y=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"setInterfaceLanguage",value:function(){var t=Object(d.a)(c.a.mark((function t(){var i,s,n,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("en"===(i=be.language)){t.next=19;break}return s=e.languageResourceCDN+e.languageResourceFolder+i+".json","https://id.who.int"!==be.apiServerUrl&&(s=be.apiServerUrl+e.languageResourceFolder+i+".json"),console.log('trying set interface language "'+i+'" from '+s),t.prev=5,t.next=8,fetch(s,{method:"GET",cache:"default"});case 8:return n=t.sent,t.next=11,n.json();case 11:o=t.sent,v.isEmpty(o)||(e.labels=o),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),console.error("Error in getting JSON lang from custom URL:"),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(){return t.apply(this,arguments)}}()},{key:"l",value:function(t){return e.labels.hasOwnProperty(t)?v.isEmpty(e.labels[t])?t:e.labels[t]:t}}]),e}();y.languageResourceCDN="https://icdcdn.who.int",y.languageResourceFolder="/languageresources/codingtool/",y.labels={};var f=function e(){Object(h.a)(this,e)};f.chapterByNo={"01":y.l("Infections"),"02":y.l("Neoplasms"),"03":y.l("Blood"),"04":y.l("Immune system"),"05":y.l("Endocrine, nutritional, metabolic"),"06":y.l("Mental and behavioural"),"07":y.l("Sleep-wake"),"08":y.l("Nervous system"),"09":y.l("Eye and adnexa"),10:y.l("Ear and mastoid"),11:y.l("Circulatory system"),12:y.l("Respiratory system"),13:y.l("Digestive system"),14:y.l("Skin"),15:y.l("Musculoskeletal system ..."),16:y.l("Genitourinary System"),17:y.l("Sexual health"),18:y.l("Pregnancy, childbirth ..."),19:y.l("Perinatal and neonatal"),20:y.l("Developmental anomalies"),21:y.l("Symptoms, signs, findings ..."),22:y.l("Injury, poisoning, ..."),23:y.l("External causes"),24:y.l("Factors influencing health ..."),25:y.l("Codes for special purposes"),26:y.l("Traditional Medicine"),V:y.l("Functioning"),X:y.l("Extension Codes")};var x=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"toString",value:function(){var t="";for(var i in e.inclusionByNo)!0===e.inclusionByNo[i]&&(t=t+i+";");return t}}]),e}();x.inclusionByNo={"01":!0,"02":!0,"03":!0,"04":!0,"05":!0,"06":!0,"07":!0,"08":!0,"09":!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0,16:!0,17:!0,18:!0,19:!0,20:!0,21:!0,22:!0,23:!0,24:!0,25:!0,26:!1,V:!1,X:!1};var g=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"toString",value:function(){var t="";for(var i in e.inclusionByNo)!0===e.inclusionByNo[i]&&(t=t+i+";");return t}}]),e}();g.inclusionByNo={"01":!0,"02":!0,"03":!0,"04":!0,"05":!0,"06":!0,"07":!0,"08":!0,"09":!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0,16:!0,17:!0,18:!0,19:!0,20:!0,21:!0,22:!0,23:!0,24:!0,25:!0,26:!0,V:!0,X:!0};var C,j=function e(){Object(h.a)(this,e)};j.inclusionByNo={"01":!0,"02":!0,"03":!0,"04":!0,"05":!0,"06":!0,"07":!0,"08":!0,"09":!0,10:!0,11:!0,12:!0,13:!0,14:!0,15:!0,16:!0,17:!0,18:!0,19:!0,20:!0,21:!0,22:!0,23:!0,24:!0,25:!0,26:!1,V:!1,X:!0},function(e){e[e.Score=0]="Score",e[e.Alphabetical=1]="Alphabetical"}(C||(C={}));var O,w,I=function(){function e(){Object(h.a)(this,e),this.searchQuery="",this.searchResult=void 0,this.searchIsFinished=!1,this.sortType=C.Score,this.wordlistSortType=C.Score,this.chFilterDefault=x.inclusionByNo,this.chFilter={},this.subtreesFilter=void 0,this.subtreeFilterUsesFoundationDescendants=void 0,this.includePostcoordination=!0,this.includeKeywordResult=!0,this.flexiSearch=!1,this.flexiSearchAvailable=!1,this.wordsAvailable=!1,this.chaptersAvailable=!1,this.medicalCodingStyleSearch=!0,this.chapterDistribution=new Array,this.chaptersWithNoResults=new Array}return Object(l.a)(e,null,[{key:"isSearchMinLength",value:function(e){var t=3;return"ja"!==be.language&&"ko"!==be.language&&"zh"!==be.language&&"zh-Hant"!==be.language||(t=2),e.length>=t}}]),e}();I.soMs=y.l("Matching score"),I.soCo=y.l("Classification order"),I.wloRr=y.l("Relatedness/repetition"),I.wloA=y.l("Alphabetical"),I.sortOptions=[{desc:I.soMs,value:C.Score},{desc:I.soCo,value:C.Alphabetical}],I.wordlistSortOptions=[{desc:I.wloRr,value:C.Score},{desc:I.wloA,value:C.Alphabetical}],I.resetSearchResult={uniqueSearchId:"",destinationEntities:[],error:!1,errorMessage:null,errorType:r.noError},function(e){e[e.open=0]="open",e[e.openPA=1]="openPA",e[e.openPR=2]="openPR",e[e.openML=3]="openML",e[e.openPL=4]="openPL",e[e.openCN=5]="openCN"}(O||(O={})),function(e){e.Default="default",e.None="none",e.Categories="categories",e.All="all",e.AllButRoot="allButRoot"}(w||(w={}));var S,k=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"removeHtmlTags",value:function(e){return e.replace(/<\/?[^>]+(>|$)/g,"")}},{key:"convertEnableSelectButtonStringToEnum",value:function(e,t){var i=w.Default;return"EmbeddedCodingTool"===t?i=w.Categories:"EmbeddedBrowser"===t&&(i=w.None),Object.values(w).includes(e)&&(i=e),i}}]),e}(),F=i(59),A=i(264),N=i(7),E=i(21),P=i(20),R=i(0),D=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).handleOnChange=s.handleOnChange.bind(Object(N.a)(s)),s.handleClick=s.handleClick.bind(Object(N.a)(s)),s}return Object(l.a)(i,[{key:"handleOnChange",value:function(){this.props.handleChFilter(this.props.chapterData.code,1)}},{key:"handleClick",value:function(){this.props.handleChFilter(this.props.chapterData.code,2)}},{key:"render",value:function(){var e=this.props.chapterData;return Object(R.jsx)("li",{className:"chapter ch"+e.code,style:{height:e.size},children:Object(R.jsxs)("div",{className:"chtitlediv",children:[Object(R.jsx)("input",{title:y.l("Exclude/include results from this chapter"),type:"checkbox",checked:this.props.checked,onChange:this.handleOnChange}),"\xa0",Object(R.jsx)("span",{title:y.l("Show only the results from this chapter"),className:"chaptertitle",onClick:this.handleClick,children:y.l(e.shortName)}),Object(R.jsx)("div",{className:"freq",children:e.frequencyStr})]})})}}]),i}(p.Component),T=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).handleClick=s.handleClick.bind(Object(N.a)(s)),s}return Object(l.a)(i,[{key:"handleClick",value:function(){this.props.handleChFilter("default",3)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"listhead",children:Object(R.jsx)("h4",{children:y.l("Chapter distribution / filter")})}),Object(R.jsxs)("div",{id:"chapters",children:[Object(R.jsx)("div",{className:"showallbutton",children:!0===this.props.filterIsActive&&Object(R.jsx)("span",{title:y.l("By default the search result includes all chapters except the Extension Codes and the Traditional Medicine."),onClick:this.handleClick,children:y.l("Show results from default set")})}),Object(R.jsxs)("ul",{className:"chdistro",children:[void 0!==this.props.chapterDistribution&&this.props.chapterDistribution.length>0&&v.orderBy(this.props.chapterDistribution,["frequency"],["desc"]).map((function(t){return Object(R.jsx)(D,{chapterData:t,checked:e.props.chFilter[t.code],handleChFilter:e.props.handleChFilter},t.code)})),void 0!==this.props.chaptersWithNoResults&&this.props.chaptersWithNoResults.length>0&&v.sortBy(this.props.chaptersWithNoResults,["code"]).map((function(t){return Object(R.jsx)(D,{chapterData:t,checked:e.props.chFilter[t.code],handleChFilter:e.props.handleChFilter},t.code)}))]})]})]})}}]),i}(p.Component),M=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){return Object(h.a)(this,i),t.call(this,e)}return Object(l.a)(i,[{key:"render",value:function(){var e=this.props.destinationEntity;return Object(R.jsxs)("span",{id:"clipboard_"+e.theCode,children:[e.entityType===s.Real&&Object(R.jsx)("span",{className:e.descendants.length>0?"notleaf":"",children:e.theCode}),e.entityType!==s.Real&&Object(R.jsxs)("span",{title:e.theCode,children:[e.theCode.includes("&")&&v.split(e.theCode,"&").map((function(e,t){return Object(R.jsx)("span",{className:t>0?"pcicon":"",children:0===t?e:"&"+e},"postcoord_"+e+"_"+t)})),e.theCode.includes("/")&&v.split(e.theCode,"/").map((function(e,t){return Object(R.jsx)("span",{className:t>0?"pcicon":"",children:0===t?e:"/"+e},"postcoord_"+e+"_"+t)}))]})]})}}]),i}(p.Component),B=i(138),U=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"fromDestinationEntitiesList",value:function(e,t){var i=e.id,s="",n=e.title;!1===e.titleIsTopScore&&e.matchingPVs.length>0&&(!1!==e.titleIsASearchResult&&!0!==e.matchingPVs[0].important||(n=e.matchingPVs[0].label),void 0!==e.matchingPVs[0].foundationUri&&(s=e.matchingPVs[0].foundationUri)),""===s&&(s=b.convertAllInFoudationURI(i));var o=i,r=n;return b.isFoundationCodingTool()&&(o=s=i,i=""),{iNo:t,uri:o,linearizationUri:i,foundationUri:s,code:e.theCode,title:k.removeHtmlTags(e.title),bestMatchText:k.removeHtmlTags(r),selectedText:k.removeHtmlTags(n)}}},{key:"fromMatchingTermsList",value:function(t,i,s,n){var o=e.fromDestinationEntitiesList(s,n);return void 0!==t&&(o.foundationUri=t),o.selectedText=k.removeHtmlTags(i),o.bestMatchText=o.selectedText,o}},{key:"fromBrowser",value:function(e,t,i,s,n){var o=b.convertInDomainURI(i.toURI()),r="",a=b.getMultilingualValue(e.title);if(void 0!==t&&void 0!==t.matchingPVs&&t.matchingPVs.length>0&&(!1!==t.titleIsASearchResult&&!0!==t.matchingPVs[0].important||(a=t.matchingPVs[0].label),void 0!==t.matchingPVs[0].foundationUri&&(r=t.matchingPVs[0].foundationUri)),void 0!==s&&(r=void 0===s.foundationUri?"":s.foundationUri,a=s.label),""===r)r=b.convertAllInFoudationURI(o);else if(void 0!==t){var c=o.replace(t.id,r);r=b.convertAllInFoudationURI(c)}var d=o,l=a=i.toString(k.removeHtmlTags(a));return b.isFoundationCodingTool()&&(d=r=o,o=""),{iNo:n,uri:d,linearizationUri:o,foundationUri:r,code:i.toCode(),title:b.getMultilingualValue(e.title),bestMatchText:l,selectedText:a}}},{key:"copyCodeToClipboard",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Selected Entity: "),console.log(t),e.prev=2,e.next=5,navigator.clipboard.writeText(t.code);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Failed to copy to clipboard: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"copyURIToClipboard",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Selected Entity: "),console.log(t),e.prev=2,e.next=5,navigator.clipboard.writeText(t.foundationUri);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("Failed to copy to clipboard: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),V=i(133),H=i(134),L=i(135),_=i(136),z=i(137),W=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).maxElementDefault=5,n.markdownPlaceholder="!markdown",n.isEntityDetailsMounted=!1,n.state={postcoordinationIsMandatory:void 0!==v.find(n.props.entityFromAPI.postcoordinationScale,{requiredPostcoordination:"true"}),definitionFromMarkdown:null,inclusionsDisplayed:n.maxElementDefault,exclusionsDisplayed:n.maxElementDefault,exclusionsData:[],matchingIndexTermsDisplayed:n.maxElementDefault,matchingIndexTermsDataOrdered:n.setStateForMatchingIndexTermsData(),codedElsewhereDisplayed:n.maxElementDefault,codedElsewhereData:[],relatedMaternalData:[],relatedPerinatalData:[]},n.handleClickAllInclusions=n.handleClickAllInclusions.bind(Object(N.a)(n)),n.handleClickAllExclusions=n.handleClickAllExclusions.bind(Object(N.a)(n)),n.handleClickAllMatchingIndexTerms=n.handleClickAllMatchingIndexTerms.bind(Object(N.a)(n)),n.handleClickAllCodedElsewhere=n.handleClickAllCodedElsewhere.bind(Object(N.a)(n)),n.handleOpenBrowser=n.handleOpenBrowser.bind(Object(N.a)(n)),n.handleOpenBrowserFromPropertyValue=n.handleOpenBrowserFromPropertyValue.bind(Object(N.a)(n)),n.handleSelectMatchingTerm=n.handleSelectMatchingTerm.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){this.isEntityDetailsMounted=!0,this.getters()}},{key:"componentWillUnmount",value:function(){this.isEntityDetailsMounted=!1}},{key:"setStateForMatchingIndexTermsData",value:function(){var e=[],t=-1;if(void 0!==this.props.entityFromSearch.matchingPVs&&(e=Object(B.a)(this.props.entityFromSearch.matchingPVs),t=v.findLastIndex(e,(function(e){return!0===e.important}))),!0===this.props.entityFromSearch.titleIsASearchResult){var i={propertyId:"title",label:this.props.entityFromSearch.title,score:this.props.entityFromSearch.score,important:this.props.entityFromSearch.important,foundationUri:b.convertAllInFoudationURI(this.props.entityFromSearch.id),propertyValueType:n.Real};t>=0?!0===i.important?e.unshift(i):e.splice(t+1,0,i):e.unshift(i)}if(e.length>0)return e}},{key:"handleClickAllInclusions",value:function(){void 0!==this.props.entityFromAPI.inclusion&&this.isEntityDetailsMounted&&this.setState({inclusionsDisplayed:this.state.inclusionsDisplayed===this.props.entityFromAPI.inclusion.length?this.maxElementDefault:this.props.entityFromAPI.inclusion.length})}},{key:"handleClickAllExclusions",value:function(){void 0!==this.props.entityFromAPI.exclusion&&this.isEntityDetailsMounted&&this.setState({exclusionsDisplayed:this.state.exclusionsDisplayed===this.props.entityFromAPI.exclusion.length?this.maxElementDefault:this.props.entityFromAPI.exclusion.length})}},{key:"handleClickAllMatchingIndexTerms",value:function(){void 0!==this.state.matchingIndexTermsDataOrdered&&this.isEntityDetailsMounted&&this.setState({matchingIndexTermsDisplayed:this.state.matchingIndexTermsDisplayed===this.state.matchingIndexTermsDataOrdered.length?this.maxElementDefault:this.state.matchingIndexTermsDataOrdered.length})}},{key:"handleClickAllCodedElsewhere",value:function(){void 0!==this.props.entityFromAPI.foundationChildElsewhere&&this.isEntityDetailsMounted&&this.setState({codedElsewhereDisplayed:this.state.codedElsewhereDisplayed===this.props.entityFromAPI.foundationChildElsewhere.length?this.maxElementDefault:this.props.entityFromAPI.foundationChildElsewhere.length})}},{key:"handleOpenBrowser",value:function(){var e={entityFromAPI:this.props.entityFromAPI,entityFromSearch:this.props.entityFromSearch,autoPostcoordination:this.props.autoPostcoordination};void 0!==this.props.handleOpenBrowser&&this.props.handleOpenBrowser(e)}},{key:"handleOpenBrowserFromPropertyValue",value:function(e){var t={entityFromAPI:this.props.entityFromAPI,entityFromSearch:this.props.entityFromSearch,autoPostcoordination:this.props.autoPostcoordination,propertyValueSelected:e};void 0!==this.props.handleOpenBrowser&&this.props.handleOpenBrowser(t)}},{key:"getters",value:function(){this.processDefinition(),this.getExclusions(),this.getCodedElsewhere(),this.getRelatedMaternal(),this.getRelatedPerinatal()}},{key:"processDefinition",value:function(){var e=this,t=b.getMultilingualValue(this.props.entityFromAPI.definition);-1!==t.indexOf(this.markdownPlaceholder)&&(t=t.replace(this.markdownPlaceholder,""),V().use(H).use(z).use(_).use(L).process(t,(function(t,i){e.isEntityDetailsMounted&&e.setState({definitionFromMarkdown:String(i)})})))}},{key:"getExclusions",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.exclusion&&this.props.entityFromAPI.exclusion.length>0)){e.next=24;break}for(t=[],i=0;i<this.props.entityFromAPI.exclusion.length;i++)s=this.props.entityFromAPI.exclusion[i],n=void 0!==s.linearizationReference?s.linearizationReference:"",!0===b.isFoundationCodingTool()&&(n=void 0!==s.foundationReference?s.foundationReference:""),o=b.getMultilingualValue(s.label),t.push({id:n,title:o,code:""});this.isEntityDetailsMounted&&this.setState({exclusionsData:t}),r=0;case 5:if(!(r<t.length)){e.next=23;break}if(""===t[r].id){e.next=20;break}return a=t[r].id,d="",e.prev=9,e.next=12,b.getICDAPIEntity(a);case 12:void 0!==(l=e.sent)&&""===(d=void 0!==(h=l).code?h.code:"")&&"block"===h.classKind&&(d=void 0!==h.codeRange?h.codeRange:""),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),d="\u2754";case 19:t[r].code=d;case 20:r++,e.next=5;break;case 23:this.isEntityDetailsMounted&&this.setState({exclusionsData:t});case 24:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"getCodedElsewhere",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h,p,u,v,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("window"===this.props.entityFromAPI.classKind){e.next=35;break}if(t=[],void 0!==this.props.entityFromAPI.foundationChildElsewhere&&this.props.entityFromAPI.foundationChildElsewhere.length>0){for(i=0;i<this.props.entityFromAPI.foundationChildElsewhere.length;i++)s=this.props.entityFromAPI.foundationChildElsewhere[i],n=void 0!==s.linearizationReference?s.linearizationReference:"",o=b.getMultilingualValue(s.label),t.push({id:n,title:o,code:""});this.isEntityDetailsMounted&&this.setState({codedElsewhereData:t})}if(!(void 0!==this.props.entityFromAPI.child&&this.props.entityFromAPI.child.length>0)){e.next=14;break}r=0;case 5:if(!(r<this.props.entityFromAPI.child.length)){e.next=13;break}return e.next=8,b.getICDAPIEntity(this.props.entityFromAPI.child[r]);case 8:void 0!==(a=e.sent)&&"window"===(void 0!==(d=a).classKind?d.classKind:"")&&(l=this.props.entityFromAPI.child[r]," ",h=b.getMultilingualValue(d.title),t.unshift({id:l,title:h,code:" "}));case 10:r++,e.next=5;break;case 13:this.isEntityDetailsMounted&&this.setState({codedElsewhereData:t});case 14:if(!(t.length>0)){e.next=35;break}p=0;case 16:if(!(p<t.length)){e.next=34;break}if(""===t[p].id||" "===t[p].code){e.next=31;break}return u=t[p].id,v="",e.prev=20,e.next=23,b.getICDAPIEntity(u);case 23:void 0!==(m=e.sent)&&(""===(v=void 0!==(y=m).code?y.code:"")&&"block"===y.classKind&&(v=void 0!==y.codeRange?y.codeRange:""),""===v&&"window"===y.classKind&&(v=" ")),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(20),v="\u2754";case 30:t[p].code=v;case 31:p++,e.next=16;break;case 34:this.isEntityDetailsMounted&&this.setState({codedElsewhereData:t});case 35:case"end":return e.stop()}}),e,this,[[20,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedMaternal",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.relatedEntitiesInMaternalChapter&&this.props.entityFromAPI.relatedEntitiesInMaternalChapter.length>0)){e.next=5;break}return e.next=3,this.getRelatedEntitiesData(this.props.entityFromAPI.relatedEntitiesInMaternalChapter);case 3:t=e.sent,this.isEntityDetailsMounted&&this.setState({relatedMaternalData:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedPerinatal",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.relatedEntitiesInPerinatalChapter&&this.props.entityFromAPI.relatedEntitiesInPerinatalChapter.length>0)){e.next=5;break}return e.next=3,this.getRelatedEntitiesData(this.props.entityFromAPI.relatedEntitiesInPerinatalChapter);case 3:t=e.sent,this.isEntityDetailsMounted&&this.setState({relatedPerinatalData:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedEntitiesData",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,n,o,r,a,d,l,h,p,u,v,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],n=0;case 2:if(!(n<t.length)){e.next=43;break}return o=t[n],r="",a="",d=!1,e.prev=7,e.next=10,b.getICDAPILookup(o);case 10:if(void 0===(l=e.sent)){e.next=34;break}if(o=void 0!==(h=l).uri?h.uri:"",r=void 0!==h.code?h.code:"",a=b.getMultilingualValue(h.title),void 0===h.postcoordinationScale){e.next=34;break}p=0;case 18:if(!(p<h.postcoordinationScale.length)){e.next=34;break}if("associatedWith"!==(u=(u=h.postcoordinationScale[p].axisName).substr(u.lastIndexOf("/")+1))){e.next=31;break}return v=this.props.entityFromAPI.uri,m=b.getMultilingualValue(this.props.entityFromAPI.title),y=this.props.entityFromAPI.code,void 0!==this.props.entityFromSearch&&this.props.entityFromSearch.entityType!==s.Real&&this.props.entityFromSearch.theCode.includes("&")&&(v=this.props.entityFromSearch.id,m=k.removeHtmlTags(this.props.entityFromSearch.title),y=this.props.entityFromSearch.theCode),o=o+" / "+v,a=a+" / "+m,r=r+"/"+y,d=!0,e.abrupt("break",34);case 31:p++,e.next=18;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(7),r="\u2754";case 39:i.push({id:o,title:a,code:r,postcoordinated:d});case 40:n++,e.next=2;break;case 43:return e.abrupt("return",i);case 44:case"end":return e.stop()}}),e,this,[[7,36]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSelectMatchingTerm",value:function(e,t,i){var s=U.fromMatchingTermsList(e,t,this.props.entityFromSearch,this.props.iNo),n="code";!0===be.viewSelectedURI&&!0===i&&(n="uri"),this.props.handleSelectEntity(s,this.props.entityFromSearch,n)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"entityDetailsCodeAndTitle",children:[!1===b.isFoundationCodingTool()&&Object(R.jsx)("div",{className:"entityDetailsTheCode",children:Object(R.jsx)(M,{destinationEntity:this.props.entityFromSearch})}),Object(R.jsx)("span",{dangerouslySetInnerHTML:{__html:this.props.entityFromSearch.title}})]}),void 0!==this.state.matchingIndexTermsDataOrdered&&this.state.matchingIndexTermsDataOrdered.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"entityDetailsSelectionHeader",children:Object(R.jsxs)("span",{className:"mitHeader propertyHeaderSelection",children:[Object(R.jsx)("span",{className:"mitHeaderFlex",children:y.l("Matching Terms")}),!1===b.isFoundationCodingTool()&&this.props.entityFromSearch.postcoordinationAvailability!==o.NotAllowed&&Object(R.jsx)("span",{className:"pcHeader "+(this.props.opener===O.openPA||this.props.opener===O.openPR?" elementToFadeOut":""),children:y.l("Postcoordination")})]})}),Object(R.jsx)("div",{className:"entityDetailsSelection",children:void 0!==this.state.matchingIndexTermsDataOrdered&&this.state.matchingIndexTermsDataOrdered.length>0&&Object(R.jsxs)("div",{children:[this.state.matchingIndexTermsDataOrdered.map((function(t,i){return i<e.state.matchingIndexTermsDisplayed&&Object(R.jsx)("div",{className:"entityToHighlight",children:Object(R.jsx)("div",{className:"entityHead"+(!0===t.important?" importantlabel":""),children:Object(R.jsxs)("span",{className:"entityTitleSelection",children:[Object(R.jsxs)("span",{className:"entityTitleSelectionFlex",children:[Object(R.jsx)("span",{className:"entityTitlePointerSelection",dangerouslySetInnerHTML:{__html:t.label},title:y.l("Select")+": "+k.removeHtmlTags(t.label),onClick:e.handleSelectMatchingTerm.bind(e,t.foundationUri,t.label,!0)}),!0===t.important&&Object(R.jsx)("span",{className:"important",children:"*"})]}),!1===b.isFoundationCodingTool()&&e.props.entityFromSearch.postcoordinationAvailability!==o.NotAllowed&&Object(R.jsxs)("span",{onClick:e.handleOpenBrowserFromPropertyValue.bind(e,t),children:[e.props.entityFromSearch.postcoordinationAvailability===o.Required&&Object(R.jsx)("span",{title:y.l("Mandatory postcoordination"),className:"circleiconWithinDetails prcolor",children:be.unicodeIcons.mandatoryPostcoordination}),e.props.entityFromSearch.postcoordinationAvailability===o.Allowed&&Object(R.jsx)("span",{title:y.l("Postcoordination is available"),className:"circleiconWithinDetails pacolor",children:be.unicodeIcons.availablePostcoordination})]})]})})},e.props.entityFromAPI.code+"_indexTermsFound_"+i)})),this.state.matchingIndexTermsDataOrdered.length>this.maxElementDefault&&Object(R.jsx)("div",{className:"showAllEntities",children:Object(R.jsx)("div",{className:"entityHead",children:Object(R.jsx)("span",{className:"entityTitleSelection",children:Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAllMatchingIndexTerms,children:[this.state.matchingIndexTermsDisplayed===this.state.matchingIndexTermsDataOrdered.length&&Object(R.jsxs)("span",{children:[y.l("Hide")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),this.state.matchingIndexTermsDisplayed!==this.state.matchingIndexTermsDataOrdered.length&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.state.matchingIndexTermsDataOrdered.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})})})})]})})]}),Object(R.jsxs)("div",{className:"entityDetailsProperties",children:[void 0!==this.props.entityFromAPI.fullySpecifiedName&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Fully Specified Name")}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.fullySpecifiedName)})]}),void 0!==this.props.entityFromAPI.definition&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Description")}),null===this.state.definitionFromMarkdown&&Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.definition)}),null!==this.state.definitionFromMarkdown&&Object(R.jsx)("div",{className:"property",children:Object(R.jsx)("span",{className:"markdownDefinition",dangerouslySetInnerHTML:{__html:this.state.definitionFromMarkdown}})})]}),void 0!==this.props.entityFromAPI.longDefinition&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Additional Information")}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.longDefinition)})]}),void 0!==this.props.entityFromAPI.inclusion&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{className:"propertyHeader",children:[y.l("Inclusions"),Object(R.jsx)("span",{children:void 0!==this.props.entityFromAPI.inclusion&&this.props.entityFromAPI.inclusion.length>this.maxElementDefault&&Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAllInclusions,children:[this.state.inclusionsDisplayed===this.props.entityFromAPI.inclusion.length&&Object(R.jsxs)("span",{children:[y.l("Hide")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),this.state.inclusionsDisplayed!==this.props.entityFromAPI.inclusion.length&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.props.entityFromAPI.inclusion.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})})]}),Object(R.jsx)("div",{className:"property",children:this.props.entityFromAPI.inclusion.map((function(t,i){return i<e.state.inclusionsDisplayed&&Object(R.jsxs)("div",{children:[" ",b.getMultilingualValue(t.label)]},e.props.entityFromAPI.code+"_inclusion_"+i)}))})]}),void 0!==this.props.entityFromAPI.exclusion&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{className:"propertyHeader",children:[y.l("Exclusions"),Object(R.jsx)("span",{children:void 0!==this.props.entityFromAPI.exclusion&&this.props.entityFromAPI.exclusion.length>this.maxElementDefault&&Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAllExclusions,children:[this.state.exclusionsDisplayed===this.props.entityFromAPI.exclusion.length&&Object(R.jsxs)("span",{children:[y.l("Hide")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),this.state.exclusionsDisplayed!==this.props.entityFromAPI.exclusion.length&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.props.entityFromAPI.exclusion.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})})]}),Object(R.jsx)("div",{className:"property",children:void 0!==this.state.exclusionsData&&this.state.exclusionsData.length>0&&this.state.exclusionsData.map((function(t,i){return i<e.state.exclusionsDisplayed&&Object(R.jsxs)("div",{children:[t.title,!1===b.isFoundationCodingTool()&&Object(R.jsxs)("span",{children:[""!==t.id&&""===t.code&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),""!==t.id&&""!==t.code&&Object(R.jsx)("span",{children:" ("+t.code+")"})]})]},e.props.entityFromAPI.code+"_excl_"+i)}))})]}),"window"!==this.props.entityFromAPI.classKind&&void 0!==this.props.entityFromAPI.foundationChildElsewhere&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{className:"propertyHeader",children:[y.l("Coded Elsewhere"),Object(R.jsx)("span",{children:void 0!==this.props.entityFromAPI.foundationChildElsewhere&&this.props.entityFromAPI.foundationChildElsewhere.length>this.maxElementDefault&&Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAllCodedElsewhere,children:[this.state.codedElsewhereDisplayed===this.props.entityFromAPI.foundationChildElsewhere.length&&Object(R.jsxs)("span",{children:[y.l("Hide")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),this.state.codedElsewhereDisplayed!==this.props.entityFromAPI.foundationChildElsewhere.length&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.props.entityFromAPI.foundationChildElsewhere.length,"]",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})})]}),Object(R.jsx)("div",{className:"property",children:void 0!==this.state.codedElsewhereData&&this.state.codedElsewhereData.length>0&&this.state.codedElsewhereData.map((function(t,i){return i<e.state.codedElsewhereDisplayed&&Object(R.jsxs)("div",{children:[t.title,""!==t.id&&""===t.code&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),""!==t.id&&""!==t.code&&Object(R.jsx)("span",{children:" ("+t.code+")"})]},e.props.entityFromAPI.code+"_elsewhere_"+i)}))})]}),void 0!==this.props.entityFromAPI.relatedEntitiesInMaternalChapter&&this.props.entityFromAPI.relatedEntitiesInMaternalChapter.length>0&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("span",{className:"propertyHeader"+(this.props.opener===O.openML?" elementToFadeOut":""),children:y.l("Related categories in maternal chapter")}),Object(R.jsx)("span",{title:y.l("Related categories in maternal chapter"),className:"circleiconWithinDetailsHeaders mlcolor",children:be.unicodeIcons.maternalChapter})]}),Object(R.jsx)("div",{className:"property",children:Object(R.jsxs)("span",{children:[0===this.state.relatedMaternalData.length&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),this.state.relatedMaternalData.length>0&&this.state.relatedMaternalData.map((function(t,i){return Object(R.jsxs)("div",{children:[t.title,Object(R.jsx)("span",{className:"showlinkNormalSize",onClick:e.props.handleSetBrowserContent.bind(e,t.id,t.postcoordinated?t.code:void 0),title:y.l("Browse"),children:""===t.code?"\u21d2":"("+t.code+")"})]},e.props.entityFromAPI.code+"_relatedMaternal_"+i)}))]})})]}),void 0!==this.props.entityFromAPI.relatedEntitiesInPerinatalChapter&&this.props.entityFromAPI.relatedEntitiesInPerinatalChapter.length>0&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("span",{className:"propertyHeader"+(this.props.opener===O.openPL?" elementToFadeOut":""),children:y.l("Related categories in perinatal chapter")}),Object(R.jsx)("span",{title:y.l("Related categories in perinatal chapter"),className:"circleiconWithinDetailsHeaders plcolor",children:be.unicodeIcons.perinatalChapter})]}),Object(R.jsx)("div",{className:"property",children:Object(R.jsxs)("span",{children:[0===this.state.relatedPerinatalData.length&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),this.state.relatedPerinatalData.length>0&&this.state.relatedPerinatalData.map((function(t,i){return Object(R.jsxs)("div",{children:[t.title,Object(R.jsx)("span",{className:"showlinkNormalSize",onClick:e.props.handleSetBrowserContent.bind(e,t.id,t.postcoordinated?t.code:void 0),title:y.l("Browse"),children:""===t.code?"\u21d2":"("+t.code+")"})]},e.props.entityFromAPI.code+"_relatedPerinatal_"+i)}))]})})]}),void 0!==this.props.entityFromAPI.codingNote&&Object(R.jsxs)("div",{className:"propertyWrapper",children:[Object(R.jsxs)("div",{children:[Object(R.jsx)("span",{className:"propertyHeader"+(this.props.opener===O.openCN?" elementToFadeOut":""),children:y.l("Coding Note")}),Object(R.jsx)("span",{title:y.l("Coding Note"),className:"circleiconWithinDetailsHeaders cncolor",children:be.unicodeIcons.codingNote})]}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.codingNote)})]}),Object(R.jsxs)("a",{className:"showlinkSeeInHierarchy",onClick:this.handleOpenBrowser,title:y.l("See in hierarchy")+" "+this.props.entityFromSearch.theCode,children:[Object(R.jsx)("span",{className:"iconSeeInHierarchy",children:be.unicodeIcons.seeInHierarchy})," ",y.l("See in hierarchy")]})]})]})}}]),i}(p.Component),q=W,X=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;Object(h.a)(this,i);var o=0;return(!1===(n=t.call(this,e,s)).props.entityFromSearch.titleIsASearchResult||void 0!==v.find(n.props.entityFromSearch.matchingPVs,{important:!0})||!0===n.props.flexiSearch&&!0===n.props.entityFromSearch.titleIsASearchResult&&!1===n.props.entityFromSearch.titleIsTopScore)&&(o=1),n.state={error:r.noError,entityFromAPI:{},displayedPVs:o,openDetails:!1,loadingDetails:!1},n.handleOpenDetails=n.handleOpenDetails.bind(Object(N.a)(n)),n.handleCloseDetails=n.handleCloseDetails.bind(Object(N.a)(n)),n.handleOpenBrowserFromEntity=n.handleOpenBrowserFromEntity.bind(Object(N.a)(n)),n.handleSelectEntity=n.handleSelectEntity.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"handleOpenDetails",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({error:r.noError,loadingDetails:!0}),!v.isEmpty(this.state.entityFromAPI)){e.next=16;break}return i=this.props.entityFromSearch.id,this.props.entityFromSearch.entityType!==s.Real&&(i=this.props.entityFromSearch.stemId,n={entityType:this.props.entityFromSearch.entityType,codeWithPostcoordination:this.props.entityFromSearch.theCode},this.setState({autoPostcoordination:n})),e.prev=4,e.next=7,b.getICDAPIEntity(i);case 7:void 0!==(o=e.sent)&&this.setState({entityFromAPI:o}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.error("Error in loading entity details"),console.error(e.t0),this.setState({error:r.default,openDetails:!0});case 16:this.setState({openDetails:!this.state.openDetails,loadingDetails:!1,entityDetailsOpener:t});case 17:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCloseDetails",value:function(){this.setState({openDetails:!1,entityDetailsOpener:void 0})}},{key:"handleOpenBrowserFromEntity",value:function(e,t,i){var s={entityFromAPI:e,entityFromSearch:t,autoPostcoordination:i};void 0!==this.props.handleOpenBrowser&&this.props.handleOpenBrowser(s)}},{key:"handleSelectEntity",value:function(e){var t=U.fromDestinationEntitiesList(this.props.entityFromSearch,this.props.iNo),i="code";!0===be.viewSelectedURI&&!0===e&&(i="uri"),this.props.handleSelectEntity(t,this.props.entityFromSearch,i)}},{key:"render",value:function(){var e=this,t=this.props.entityFromSearch;return Object(R.jsxs)("li",{children:[!1===this.state.openDetails&&Object(R.jsxs)("div",{className:"entityInList",children:[Object(R.jsxs)("div",{className:"entityHead"+(t.important?" importantlabel":""),children:[!1===b.isFoundationCodingTool()&&""!==t.theCode&&Object(R.jsx)("div",{className:"entityTheCode highlightedParent",onClick:this.handleSelectEntity.bind(this,!1),children:Object(R.jsx)(M,{destinationEntity:this.props.entityFromSearch})}),Object(R.jsxs)("div",{className:"entityTitleAndIcons",children:[Object(R.jsxs)("span",{className:"entityTitle",children:[Object(R.jsx)("span",{className:"entityTitlePointer",dangerouslySetInnerHTML:{__html:t.title},onClick:this.handleSelectEntity.bind(this,!0)}),!0===this.state.loadingDetails&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),t.important&&Object(R.jsx)("span",{className:"important",title:y.l("Important"),children:"*"})]}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.openPR),children:t.postcoordinationAvailability===o.Required&&Object(R.jsx)("span",{title:y.l("Mandatory postcoordination"),className:"circleicon prcolor",children:be.unicodeIcons.mandatoryPostcoordination})}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.openPA),children:t.postcoordinationAvailability===o.Allowed&&Object(R.jsx)("span",{title:y.l("Postcoordination is available"),className:"circleicon pacolor",children:be.unicodeIcons.availablePostcoordination})}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.openML),children:!0===t.hasMaternalChapterLink&&Object(R.jsx)("span",{title:y.l("Related categories in maternal chapter"),className:"circleicon mlcolor",children:be.unicodeIcons.maternalChapter})}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.openPL),children:!0===t.hasPerinatalChapterLink&&Object(R.jsx)("span",{title:y.l("Related categories in perinatal chapter"),className:"circleicon plcolor",children:be.unicodeIcons.perinatalChapter})}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.openCN),children:!0===t.hasCodingNote&&Object(R.jsx)("span",{title:y.l("Coding Note"),className:"circleicon cncolor",children:be.unicodeIcons.codingNote})}),!1===this.props.simplifiedMode&&!1===this.state.openDetails&&Object(R.jsx)("span",{onClick:this.handleOpenDetails.bind(this,O.open),title:y.l("Details"),children:!1===this.state.openDetails&&Object(R.jsx)("span",{className:"showdetails",children:Object(R.jsxs)("span",{className:"showlink",children:["[",y.l("Details"),"]"]})})})]})]}),Object(R.jsx)("div",{className:"entityPv",children:1===this.state.displayedPVs&&t.matchingPVs.length>0&&Object(R.jsxs)("div",{className:!0===t.matchingPVs[0].important?"pvs importantlabel":"pvs",children:[Object(R.jsx)("span",{className:"entityPvPointer",dangerouslySetInnerHTML:{__html:t.matchingPVs[0].label},onClick:this.handleSelectEntity.bind(this,!0)}),t.matchingPVs[0].important&&Object(R.jsx)("span",{className:"important",title:y.l("Important"),children:"*"})]})})]}),!0===this.state.openDetails&&Object(R.jsxs)("div",{className:"entityDetails",children:[Object(R.jsx)("span",{className:"entityDetailsCloseiconWrapper",children:Object(R.jsx)("span",{className:"entityDetailsCloseicon",title:y.l("Close")+" "+(null!==t.theCode?t.theCode:""),onClick:this.handleCloseDetails,children:be.unicodeIcons.close})}),Object(R.jsx)("span",{className:"clearfix"}),Object(R.jsx)("div",{className:"entityDetailsContent",children:Object(R.jsx)(q,{iNo:this.props.iNo,opener:this.state.entityDetailsOpener,entityFromAPI:this.state.entityFromAPI,entityFromSearch:this.props.entityFromSearch,autoPostcoordination:this.state.autoPostcoordination,handleOpenBrowser:this.props.handleOpenBrowser,handleCloseBrowser:this.props.handleCloseBrowser,handleSetBrowserContent:this.props.handleSetBrowserContent,handleSelectEntity:this.props.handleSelectEntity})})]}),t.descendants.length>0&&Object(R.jsxs)("ul",{className:"ulDescendants",children:[this.props.descendantsSortType===C.Score&&v.orderBy(t.descendants,["score"],["desc"]).map((function(t){return Object(R.jsx)(i,{iNo:e.props.iNo,entityFromSearch:t,getHighlightedCurrentId:e.props.getHighlightedCurrentId,highlightFromMouse:e.props.highlightFromMouse,onMouseOverIndex:e.props.onMouseOverIndex,flexiSearch:e.props.flexiSearch,descendantsSortType:e.props.descendantsSortType,simplifiedMode:e.props.simplifiedMode,handleOpenBrowser:e.props.handleOpenBrowser,handleCloseBrowser:e.props.handleCloseBrowser,handleSetBrowserContent:e.props.handleSetBrowserContent,handleSelectEntity:e.props.handleSelectEntity},"descendant_"+t.id)})),this.props.descendantsSortType===C.Alphabetical&&t.descendants.map((function(t){return Object(R.jsx)(i,{iNo:e.props.iNo,entityFromSearch:t,getHighlightedCurrentId:e.props.getHighlightedCurrentId,highlightFromMouse:e.props.highlightFromMouse,onMouseOverIndex:e.props.onMouseOverIndex,flexiSearch:e.props.flexiSearch,descendantsSortType:e.props.descendantsSortType,simplifiedMode:e.props.simplifiedMode,handleOpenBrowser:e.props.handleOpenBrowser,handleCloseBrowser:e.props.handleCloseBrowser,handleSetBrowserContent:e.props.handleSetBrowserContent,handleSelectEntity:e.props.handleSelectEntity},"descendant_"+t.id)}))]})]})}}]),i}(p.Component),K=X,Q=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).state={entityFromAPI:void 0,entityFromSearch:void 0,sortType:n.props.sortType,sortTypeCache:n.props.sortType},n.handleChangeSortType=n.handleChangeSortType.bind(Object(N.a)(n)),n.getHighlightedCurrentId=n.getHighlightedCurrentId.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(e){if(this.props.flexiSearch!==e.flexiSearch){var t=this.state.sortTypeCache;!0===this.props.flexiSearch&&(t=C.Score),this.setState({sortType:t}),this.props.destinationEntitiesSortUpdate(t)}}},{key:"handleChangeSortType",value:function(e){var t=e.target,i=parseInt(t.value,10);this.setState({sortType:i,sortTypeCache:i}),this.props.destinationEntitiesSortUpdate(i)}},{key:"getHighlightedCurrentId",value:function(){return this.props.highlightedCurrentId}},{key:"render",value:function(){var e=this;return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"entitylist",children:[(!0===this.props.wordsAvailable||!0===this.props.chaptersAvailable)&&Object(R.jsxs)("div",{className:"listhead",children:[Object(R.jsx)("h4",{children:y.l("Destination Entities")}),void 0!==this.props.searchResult.destinationEntities&&this.props.searchResult.destinationEntities.length>0&&!1===this.props.flexiSearch&&Object(R.jsxs)("span",{className:"sortoption",children:[y.l("sort"),":\xa0",Object(R.jsx)("select",{title:"Sort by",value:this.state.sortType,onChange:this.handleChangeSortType,children:I.sortOptions.map((function(e,t){return Object(R.jsx)("option",{label:y.l(e.desc),value:e.value,children:y.l(e.desc)},t)}))})]})]}),void 0!==this.props.searchResult.destinationEntities&&!0===this.props.searchIsFinished&&0===this.props.searchResult.destinationEntities.length&&Object(R.jsxs)("div",{children:[Object(R.jsx)("p",{className:"textNotFound",children:y.l("Couldn't find matching entities")}),!0===this.props.flexiSearchAvailable&&!1===this.props.flexiSearch&&Object(R.jsx)("span",{id:"flexisearchbtn",onClick:this.props.switchToFlexible,children:y.l("Try flexible search")})]}),void 0!==this.props.searchResult.destinationEntities&&this.props.searchResult.destinationEntities.length>0&&Object(R.jsxs)("ul",{className:"toplevel",children:[this.state.sortType===C.Score&&v.orderBy(this.props.searchResult.destinationEntities,["score"],["desc"]).map((function(t,i){return Object(R.jsx)(K,{iNo:e.props.iNo,entityFromSearch:t,getHighlightedCurrentId:e.getHighlightedCurrentId,highlightFromMouse:e.props.highlightFromMouse,onMouseOverIndex:i,flexiSearch:e.props.flexiSearch,descendantsSortType:e.state.sortType,simplifiedMode:e.props.simplifiedMode,handleOpenBrowser:e.props.handleOpenBrowser,handleCloseBrowser:e.props.handleCloseBrowser,handleSetBrowserContent:e.props.handleSetBrowserContent,handleSelectEntity:e.props.handleSelectEntity},t.id)})),this.state.sortType===C.Alphabetical&&this.props.searchResult.destinationEntities.map((function(t,i){return Object(R.jsx)(K,{iNo:e.props.iNo,entityFromSearch:t,getHighlightedCurrentId:e.getHighlightedCurrentId,highlightFromMouse:e.props.highlightFromMouse,onMouseOverIndex:i,flexiSearch:e.props.flexiSearch,descendantsSortType:e.state.sortType,simplifiedMode:e.props.simplifiedMode,handleOpenBrowser:e.props.handleOpenBrowser,handleCloseBrowser:e.props.handleCloseBrowser,handleSetBrowserContent:e.props.handleSetBrowserContent,handleSelectEntity:e.props.handleSelectEntity},t.id)}))]})]})})}}]),i}(p.Component),J=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).state={wordlistSortType:n.props.searchViewModel.wordlistSortType},n.handleChangeSortType=n.handleChangeSortType.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"handleChangeSortType",value:function(e){var t=e.target,i=parseInt(t.value,10);this.setState({wordlistSortType:i}),this.props.wordListSortUpdate(i)}},{key:"handleClickWord",value:function(e){void 0!==this.props.searchViewModel.searchResult.guessType&&this.props.inputChangedFromWordList(this.props.searchViewModel.searchResult.guessType,e)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"listhead",children:[Object(R.jsx)("h4",{children:y.l("Word list")}),void 0!==this.props.searchViewModel.searchResult.words&&this.props.searchViewModel.searchResult.words.length>0&&Object(R.jsxs)("span",{className:"sortoption",children:[y.l("sort")," :\xa0",Object(R.jsx)("select",{title:"Sort by",value:this.state.wordlistSortType,onChange:this.handleChangeSortType,children:I.wordlistSortOptions.map((function(e,t){return Object(R.jsx)("option",{label:y.l(e.desc),value:e.value,children:y.l(e.desc)},t)}))})]})]}),void 0!==this.props.searchViewModel.searchResult.words&&!0===this.props.searchViewModel.searchIsFinished&&0===this.props.searchViewModel.searchResult.words.length&&Object(R.jsx)("p",{className:"textNotFound",children:0===this.props.searchViewModel.searchResult.destinationEntities.length?y.l("Couldn't find matching words"):y.l("Couldn't find additional matching words")}),Object(R.jsxs)("div",{className:"wordlist",children:[Object(R.jsxs)("ul",{children:[void 0!==this.props.searchViewModel.searchResult.words&&this.state.wordlistSortType===C.Score&&this.props.searchViewModel.searchResult.words.map((function(t,i){return Object(R.jsx)("li",{className:t.dontChangeResult?"dontChangeResult":"",onClick:e.handleClickWord.bind(e,t.label),children:t.label},i)})),void 0!==this.props.searchViewModel.searchResult.words&&this.state.wordlistSortType===C.Alphabetical&&v.sortBy(this.props.searchViewModel.searchResult.words,["label"]).map((function(t,i){return Object(R.jsx)("li",{className:t.dontChangeResult?"dontChangeResult":"",onClick:e.handleClickWord.bind(e,t.label),children:t.label},i)}))]}),Object(R.jsx)("div",{className:"chopped",children:this.props.searchViewModel.searchResult.wordSuggestionsChopped&&y.l("The suggestions shown are incomplete")})]})]})}}]),i}(p.Component),G=function e(){Object(h.a)(this,e),this.searchResult=void 0,this.error=!1,this.errorType=r.noError,this.cancelled=!1},Z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(h.a)(this,e),this.searchVM=void 0,this.throttledRedoSearchDelegate=void 0,this.latestCallNumber=0,this.debouceCallNumber=0,this.cancelBefore=-1,this.debounceCancelBefore=-1,this.searchByCodeOrURI=void 0,this.searchByCodeMinLength=6,this.searchCallbacks=void 0,this.searchByCodeOrURI=t,this.searchCallbacks=i,this.throttledRedoSearchDelegate=v.debounce(this.redoSearch,800)}return Object(l.a)(e,[{key:"redoSearch",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s,n,o,a,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===this.searchCallbacks&&void 0!==ye.searchStartedFunction&&ye.searchStartedFunction(),i=new G,!(this.debounceCancelBefore>=this.debouceCallNumber)){e.next=6;break}return i.cancelled=!0,t(i),e.abrupt("return");case 6:for(a in s=this.latestCallNumber+1,this.latestCallNumber++,n=this.searchVM.searchQuery,o="",this.searchVM.chFilter)!0===this.searchVM.chFilter[a]&&(o=o+a+";");if(!(s<this.latestCallNumber||this.cancelBefore>=s)){e.next=13;break}return e.abrupt("return");case 13:if(e.prev=13,!0!==this.searchByCodeOrURI||!1!==this.searchVM.flexiSearch){e.next=18;break}return e.next=17,this.trySearchByCodeOrURI(n);case 17:d=e.sent;case 18:if(void 0!==d){e.next=22;break}return e.next=21,b.search(n,o,this.searchVM.subtreesFilter,this.searchVM.subtreeFilterUsesFoundationDescendants,this.searchVM.includePostcoordination,this.searchVM.flexiSearch,this.searchVM.flexiSearch,this.searchVM.includeKeywordResult,!0,!0,this.searchVM.medicalCodingStyleSearch);case 21:d=e.sent;case 22:void 0!==d&&(i.searchResult=d,t(i)),e.next=30;break;case 25:e.prev=25,e.t0=e.catch(13),i.error=!0,i.errorType=r.default,t(i);case 30:case"end":return e.stop()}}),e,this,[[13,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"throttledRedoSearch",value:function(e,t){this.searchVM=e,this.debouceCallNumber++,this.throttledRedoSearchDelegate(t)}},{key:"cancelPreviousRequests",value:function(){this.cancelBefore=this.latestCallNumber,this.debounceCancelBefore=this.debouceCallNumber}},{key:"setSearchByCodeOrURI",value:function(e){this.searchByCodeOrURI=e}},{key:"trySearchByCodeOrURI",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s,n,o,a,d,l,h,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new RegExp("^[1-9][0-9]+$"),s=new RegExp("^[0-9A-HJ-NP-V][A-HJ-NP-Z][0-9][0-9A-HJ-NP-Z](.[0-9A-HJ-NP-Z][0-9A-HJ-NP-Z]?)?$"),n=new RegExp("^X[A-Z][0-9][0-9A-Z]([0-9A-Z]([0-9])?)?$"),t=v.trimStart(t),t=v.trimEnd(t,"%"),!(v.startsWith(t,"http://id.who.int/icd/entity/")||t.length>=this.searchByCodeMinLength&&i.test(t))){e.next=18;break}return a=b.getRootUri()+"/"+b.getNumberAtTheEnd(t),e.prev=7,e.next=10,this.getEntityFiltered(a);case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),console.log("Trying search by URI couldn't find the entity");case 16:e.next=34;break;case 18:if(t=v.toUpper(t),!s.test(t)&&!n.test(t)){e.next=34;break}return e.prev=20,e.next=23,b.getICDAPICode(t);case 23:d=e.sent,e.next=29;break;case 26:e.prev=26,e.t1=e.catch(20),console.log("Trying search by Code couldn't find the entity");case 29:if(void 0===d||void 0===d.stemId){e.next=34;break}return l=b.convertInCustomDomainURI(d.stemId),e.next=33,this.getEntityFiltered(l);case 33:o=e.sent;case 34:if(void 0===o||void 0===o.uri){e.next=41;break}return(h=b.convertLinearizationEntityToDestinationEntity(o,o.uri)).important=!0,p={uniqueSearchId:"",destinationEntities:[h],error:!1,errorMessage:null,errorType:r.noError},e.abrupt("return",p);case 41:return e.abrupt("return",void 0);case 42:case"end":return e.stop()}}),e,this,[[7,13],[20,26]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntityFiltered",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.searchVM.subtreesFilter||""===this.searchVM.subtreesFilter){e.next=13;break}if(!((s=v.split(this.searchVM.subtreesFilter,",")).length>0&&""!==s[0])){e.next=11;break}return e.next=5,b.getLinearizationAncestorsURI(t,!0);case 5:if(n=e.sent,!(v.intersection(n,s).length>0)){e.next=11;break}return e.next=10,b.getICDAPIEntity(t);case 10:i=e.sent;case 11:e.next=16;break;case 13:return e.next=15,b.getICDAPIEntity(t);case 15:i=e.sent;case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),$=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){return Object(h.a)(this,i),t.call(this,e)}return Object(l.a)(i,[{key:"render",value:function(){var e="ctwFlexItem50";return!1===this.props.wordsAvailable&&!1===this.props.chaptersAvailable?e="ctwFlexItem100":!1!==this.props.wordsAvailable&&!1!==this.props.chaptersAvailable&&!0!==this.props.flexiSearch||(e="ctwFlexItem75",!0===this.props.flexiSearch&&!1===this.props.chaptersAvailable&&(e="ctwFlexItem100")),Object(R.jsx)("div",{children:Object(R.jsxs)("div",{id:"statusFlexContainer",children:[!1===this.props.flexiSearch&&!0===this.props.wordsAvailable&&Object(R.jsxs)("div",{className:"ctwFlexItem25 statusFlexWords",children:[1===this.props.guessType?y.l("Guessing the word being typed..."):"",2===this.props.guessType?y.l("Related words..."):""]}),Object(R.jsxs)("div",{className:"statusFlexInfo "+e,children:[!0===this.props.error&&this.props.errorType!==r.noError&&Object(R.jsxs)("span",{className:"defaultErrorAlert statusError",children:[" ",this.props.error?y.l(this.props.errorMessage):""]}),void 0===this.props.selectedCode&&Object(R.jsxs)("span",{children:[Object(R.jsxs)("span",{className:"chopped",children:[" ",this.props.resultChopped?y.l("The results shown are incomplete"):""]}),Object(R.jsxs)("span",{className:"flexi",children:[" ",this.props.flexiSearch?y.l("Flexible search is on"):""]})]}),void 0!==this.props.selectedCode&&Object(R.jsx)("span",{className:"clipboard",title:this.props.selectedCode,children:y.l("Selected:")+" "+this.props.selectedCode})]}),!0===this.props.chaptersAvailable&&Object(R.jsxs)("div",{className:"ctwFlexItem25 statusFlexFilter",children:[Object(R.jsx)("span",{className:"filterSwitchStar",title:y.l("Custom filter is active!"),children:!0===this.props.filterIsActive?"\u2605":""}),Object(R.jsx)("span",{className:"filterSwitchLabel",children:y.l("Filter")}),Object(R.jsxs)("label",{className:"filterSwitch",children:[Object(R.jsx)("input",{type:"checkbox",onChange:this.props.filterSwitch,checked:this.props.filterOpen}),Object(R.jsx)("span",{className:"slider round"})]})]})]})})}}]),i}(p.Component);!function(e){e.node="node",e.nodeResidual="nodeResidual",e.nodeWindow="nodeWindow",e.nodeAdoptedChild="nodeAdoptedChild",e.nodeAdoptedResidual="nodeAdoptedResidual"}(S||(S={}));var Y=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).isNodeMounted=!1,s.nodeToScrollClass="nodeToScroll",s.state={error:r.noError,loadingEntityFromAPI:!0,entityFromAPI:{},foundationChildElsewhereAsAdoptedChildren:[],nodeType:S.node,isSelected:s.props.nodeUri===s.props.initialPath[s.props.initialPath.length-1],hasChildren:!1,residualsChildren:[],showChildren:!1},s.handleOpenChildren=s.handleOpenChildren.bind(Object(N.a)(s)),s.handleCloseChildren=s.handleCloseChildren.bind(Object(N.a)(s)),s.handleSelectNode=s.handleSelectNode.bind(Object(N.a)(s)),s}return Object(l.a)(i,[{key:"componentDidMount",value:function(){this.isNodeMounted=!0,this.loadEntityFromAPI()}},{key:"componentDidUpdate",value:function(e){this.props.openEntityFromHierarchyNode===e.openEntityFromHierarchyNode?this.state.loadingEntityFromAPI||this.props.nodeUri!==this.props.initialPath[this.props.initialPath.length-1]||this.scrollToNode():(!0===this.state.isSelected&&this.isNodeMounted&&this.setState({isSelected:!1}),this.props.nodeUri===this.props.openEntityFromHierarchyNode&&this.isNodeMounted&&this.setState({isSelected:!0}))}},{key:"componentWillUnmount",value:function(){this.isNodeMounted=!1}},{key:"loadEntityFromAPI",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],i=!1,void 0!==this.props.initialPath&&this.props.initialPath.includes(this.props.nodeUri)&&(i=!0),e.prev=3,e.next=6,b.getICDAPIEntity(this.props.nodeUri);case 6:void 0!==(s=e.sent)&&(n=S.node,b.isEntityResidual(this.props.nodeUri)&&(n=S.nodeResidual),"window"===s.classKind&&(n=S.nodeWindow),this.props.isNodeAdoptedChildren&&(n=S.nodeAdoptedChild,b.isEntityResidual(this.props.nodeUri)&&(n=S.nodeAdoptedResidual)),void 0!==this.props.showAdoptedChildren&&!0===this.props.showAdoptedChildren&&void 0!==s.foundationChildElsewhere&&(t=v.filter(s.foundationChildElsewhere,(function(e){return void 0!==e.linearizationReference&&void 0!==e.foundationReference&&b.getNumberAtTheEnd(e.linearizationReference)===b.getNumberAtTheEnd(e.foundationReference)}))),!(o=void 0!==s.child||"window"===s.classKind)&&this.props.showAdoptedChildren&&(o=void 0!==t&&t.length>0),a=[],o&&void 0!==s.child&&(a=v.filter(s.child,(function(e){return b.isEntityResidual(e)}))),this.isNodeMounted&&this.setState({loadingEntityFromAPI:!1,entityFromAPI:s,foundationChildElsewhereAsAdoptedChildren:t,nodeType:n,hasChildren:o,residualsChildren:a,showChildren:i})),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("loading hierarchy error "+this.props.nodeUri),console.log(e.t0),this.isNodeMounted&&this.setState({error:r.default});case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleOpenChildren",value:function(){this.state.hasChildren&&this.isNodeMounted&&this.setState({showChildren:!0})}},{key:"handleCloseChildren",value:function(){this.isNodeMounted&&this.setState({showChildren:!1})}},{key:"handleSelectNode",value:function(){void 0!==this.props.handleSelectNode&&this.props.handleSelectNode(this.props.nodeUri)}},{key:"scrollToNode",value:function(){if(void 0===this.props.openEntityFromHierarchyNode){var e=document.querySelector(".browserBody"),t=document.querySelector("."+this.nodeToScrollClass);void 0!==t&&null!==t&&void 0!==e&&null!==e&&(t.getBoundingClientRect().bottom>e.getBoundingClientRect().height||t.getBoundingClientRect().top<e.getBoundingClientRect().height)&&(console.log("scroll to node!"),t.scrollIntoView({behavior:"smooth",block:"center"}))}}},{key:"render",value:function(){var e=this;return this.state.error!==r.noError?Object(R.jsx)("li",{className:"defaultErrorAlert nodeError",children:y.l("ERROR occurred in Loading Content! Please try again by closing and re-opening the parent node or refresing the page")}):Object(R.jsxs)("li",{className:this.state.nodeType!==S.nodeWindow||void 0!==this.props.showAdoptedChildren&&this.props.showAdoptedChildren?"":"hideNodeWindow",children:[!0===this.state.loadingEntityFromAPI&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),!1===this.state.loadingEntityFromAPI&&void 0!==this.state.entityFromAPI&&Object(R.jsxs)("span",{children:[!0===this.state.hasChildren&&Object(R.jsxs)("span",{children:[!1===this.state.showChildren&&Object(R.jsx)("span",{className:"collapsed",onClick:this.handleOpenChildren,children:be.unicodeIcons.hierarchyCollapsed}),!0===this.state.showChildren&&Object(R.jsx)("span",{className:"expanded",onClick:this.handleCloseChildren,children:be.unicodeIcons.hierarchyExpanded})]}),!1===this.state.hasChildren&&Object(R.jsx)("span",{className:"empty",children:"\xa0"}),Object(R.jsx)("span",{className:this.state.isSelected?"labelinh selected "+this.nodeToScrollClass:"labelinh",onClick:this.handleSelectNode,children:Object(R.jsxs)("span",{className:this.state.nodeType,children:[void 0!==this.state.entityFromAPI.code&&Object(R.jsx)("span",{className:"codeinh",children:this.state.entityFromAPI.code}),Object(R.jsxs)("span",{className:"titleinh",children:[" ",b.getMultilingualValue(this.state.entityFromAPI.title)]})]})}),!0===this.state.hasChildren&&!0===this.state.showChildren&&Object(R.jsxs)("span",{children:[Object(R.jsx)("ul",{children:void 0!==this.state.entityFromAPI.child&&this.state.entityFromAPI.child.map((function(t,s){return b.isEntityResidual(t)?"":Object(R.jsx)(i,{nodeUri:t,initialPath:e.props.initialPath,level:e.props.level+1,showAdoptedChildren:e.props.showAdoptedChildren,isNodeAdoptedChildren:e.props.isNodeAdoptedChildren,openEntityFromHierarchyNode:e.props.openEntityFromHierarchyNode,handleSelectNode:e.props.handleSelectNode},"l"+e.props.level+"_"+s+"_"+t)}))}),void 0!==this.props.showAdoptedChildren&&!0===this.props.showAdoptedChildren&&Object(R.jsx)("ul",{children:void 0!==this.state.foundationChildElsewhereAsAdoptedChildren&&this.state.foundationChildElsewhereAsAdoptedChildren.map((function(t,s){return void 0!==t.linearizationReference?Object(R.jsx)(i,{nodeUri:t.linearizationReference,initialPath:e.props.initialPath,level:e.props.level+1,showAdoptedChildren:e.props.showAdoptedChildren,isNodeAdoptedChildren:!0,openEntityFromHierarchyNode:e.props.openEntityFromHierarchyNode,handleSelectNode:e.props.handleSelectNode},"l"+e.props.level+"_"+s+"_"+t.linearizationReference):""}))}),void 0!==this.state.residualsChildren&&this.state.residualsChildren.length>0&&Object(R.jsx)("ul",{children:this.state.residualsChildren.map((function(t,s){return Object(R.jsx)(i,{nodeUri:t,initialPath:e.props.initialPath,level:e.props.level+1,showAdoptedChildren:e.props.showAdoptedChildren,isNodeAdoptedChildren:e.props.isNodeAdoptedChildren,openEntityFromHierarchyNode:e.props.openEntityFromHierarchyNode,handleSelectNode:e.props.handleSelectNode},"l"+e.props.level+"_"+s+"_"+t)}))})]})]})]})}}]),i}(p.Component),ee=Y,te=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e){var s;return Object(h.a)(this,i),(s=t.call(this,e)).isHiearchyMounted=!1,s.state={loadingInitialPath:!0,initialPath:[]},s.handleSelectNode=s.handleSelectNode.bind(Object(N.a)(s)),s}return Object(l.a)(i,[{key:"componentDidMount",value:function(){this.isHiearchyMounted=!0,this.buildInitialPath()}},{key:"componentDidUpdate",value:function(e){(this.props.openEntityFromUri!==e.openEntityFromUri||void 0===this.props.openEntityFromHierarchyNode&&void 0!==e.openEntityFromHierarchyNode)&&this.buildInitialPath()}},{key:"componentWillUnmount",value:function(){this.isHiearchyMounted=!1}},{key:"buildInitialPath",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.isHiearchyMounted&&this.setState({loadingInitialPath:!0,initialPath:t}),void 0===this.props.openEntityFromUri){e.next=13;break}return e.prev=3,e.next=6,b.getLinearizationAncestorsURI(this.props.openEntityFromUri,!0);case 6:i=e.sent,t=v.reverse(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("error building thePath: the hierarchy will show only the root(s)");case 13:this.isHiearchyMounted&&this.setState({loadingInitialPath:!1,initialPath:t});case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSelectNode",value:function(e){e!==this.props.openEntityFromHierarchyNode&&void 0!==this.props.handleSelectNode&&this.props.handleSelectNode(e)}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{className:"hierarchy",children:[!0===this.state.loadingInitialPath&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),!1===this.state.loadingInitialPath&&Object(R.jsxs)("span",{children:[void 0!==this.props.rootTitle&&Object(R.jsxs)("div",{className:"rtitle",children:[this.props.rootTitle," ",Object(R.jsx)("span",{className:"rsubtitle",children:void 0!==this.props.rootSubTitle&&this.props.rootSubTitle})]}),void 0!==this.props.rootEntityIds&&this.props.rootEntityIds.length>0&&Object(R.jsx)("ul",{className:"topul",children:this.props.rootEntityIds.map((function(t,i){return Object(R.jsx)(ee,{nodeUri:t,initialPath:e.state.initialPath,level:1,showAdoptedChildren:e.props.showAdoptedChildren,isNodeAdoptedChildren:!1,openEntityFromHierarchyNode:e.props.openEntityFromHierarchyNode,handleSelectNode:e.handleSelectNode},"l0_"+i+"_"+t)}))})]})]})}}]),i}(p.Component),ie=te,se=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;Object(h.a)(this,i),(n=t.call(this,e)).maxElementDefault=12,n.searchService=void 0,n.isPostcoordinationActionMounted=!1,n.realAxisName=void 0,n.searchService=new Z;var o=n.props.axisName.substr(n.props.axisName.lastIndexOf("/")+1),r=!("hasCausingCondition"===o||"associatedWith"===o||"hasManifestation"===o);return n.realAxisName=v.upperFirst(v.lowerCase(o)),n.state={searchAvailable:!1,searchShowResult:!1,displayedPVs:{},isPostcoordinationFromXCodeChapter:r,searchQuery:"",searchResult:I.resetSearchResult,searchIsFinished:!0,sortType:C.Score,wordlistSortType:C.Score,chFilterDefault:j.inclusionByNo,chFilter:j.inclusionByNo,subtreesFilter:v.join(n.props.scaleEntity,","),subtreeFilterUsesFoundationDescendants:r,includePostcoordination:!1,includeKeywordResult:!1,flexiSearch:!1,flexiSearchAvailable:!1,wordsAvailable:!1,chaptersAvailable:!1,chapterDistribution:new Array,chaptersWithNoResults:new Array},n.selectionChanged=n.selectionChanged.bind(Object(N.a)(n)),n.selectionChangedWithCombinedCode=n.selectionChangedWithCombinedCode.bind(Object(N.a)(n)),n.handleSearch=n.handleSearch.bind(Object(N.a)(n)),n.handleOpenPVs=n.handleOpenPVs.bind(Object(N.a)(n)),n.handleClosePVs=n.handleClosePVs.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isPostcoordinationActionMounted=!0,void 0===this.props.scaleEntity){e.next=19;break}if(!(this.props.scaleEntity.length>this.maxElementDefault)){e.next=6;break}this.isPostcoordinationActionMounted&&this.setState({searchAvailable:!0}),e.next=19;break;case 6:t=0;case 7:if(!(t<this.props.scaleEntity.length)){e.next=19;break}return e.next=10,b.getICDAPIEntity(this.props.scaleEntity[t]);case 10:if(void 0===(i=e.sent)){e.next=16;break}if(!(void 0!==(s=i).child&&s.child.length>0)){e.next=16;break}return this.isPostcoordinationActionMounted&&this.setState({searchAvailable:!0}),e.abrupt("break",19);case 16:t++,e.next=7;break;case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.isPostcoordinationActionMounted=!1}},{key:"selectionChanged",value:function(e){void 0===this.props.addToThisOther?this.props.changePostcoordinatedCode(this.realAxisName,e,this.props.allowMultipleValues):this.props.changePostcoordinatedCode(this.realAxisName,e,this.props.allowMultipleValues,this.props.addToThisOther),""!==e&&this.isPostcoordinationActionMounted&&this.setState({openEntityFromHierarchyNode:e})}},{key:"selectionChangedWithCombinedCode",value:function(e,t,i,n){if(n===s.UnderShoreLineLogicallyDefined&&e.includes("/")){var o=t.substring(0,t.indexOf(" / "));this.selectionChanged(o)}else if(void 0!==this.props.changePostcoordinatedCodeWithCombinedCode){i=k.removeHtmlTags(i);var r={axis:this.realAxisName,stemcode:e,uri:t,entityType:n,title:i};this.props.changePostcoordinatedCodeWithCombinedCode(r,this.props.allowMultipleValues)}}},{key:"handleSearch",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.searchService.cancelPreviousRequests(),i=t.target,s=i.value,I.isSearchMinLength(s)?(s+="%",this.isPostcoordinationActionMounted&&this.setState({searchIsFinished:!1,searchResult:I.resetSearchResult,searchQuery:s,searchShowResult:!0}),v.delay((function(){return n.callService()}),10)):this.isPostcoordinationActionMounted&&this.setState({searchShowResult:!1,searchQuery:s});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"callService",value:function(){var e=this;this.searchService.throttledRedoSearch(this.state,(function(t){if(e.isPostcoordinationActionMounted&&e.setState({searchIsFinished:!0}),void 0!==t&&!t.cancelled)if(t.error){var i={error:!0};i.errorType=t.errorType,i.errorMessage=y.l("An error occurred. Please try again later"),e.isPostcoordinationActionMounted&&e.setState({searchResult:i})}else{var s=e.buildDisplayedPVsRecursively(t.searchResult.destinationEntities,{});e.isPostcoordinationActionMounted&&e.setState({searchResult:t.searchResult,displayedPVs:s})}}))}},{key:"buildDisplayedPVsRecursively",value:function(e,t){for(var i=0;i<e.length;i++)e[i].matchingPVs.length>0&&(t[e[i].id]=1),void 0!==e[i].descendants&&e[i].descendants.length>0&&(t=this.buildDisplayedPVsRecursively(e[i].descendants,t));return t}},{key:"toggleSearchResult",value:function(e){I.isSearchMinLength(this.state.searchQuery)&&this.isPostcoordinationActionMounted&&this.setState({searchShowResult:e})}},{key:"handleOpenPVs",value:function(e,t){var i=this.state.displayedPVs;i[e]=t,this.isPostcoordinationActionMounted&&this.setState({displayedPVs:i})}},{key:"handleClosePVs",value:function(e){var t=this.state.displayedPVs;t[e]=1,this.isPostcoordinationActionMounted&&this.setState({displayedPVs:t})}},{key:"renderDescendantsRecursively",value:function(e){var t=this;return v.orderBy(e,["score"],["desc"]).map((function(e,i){return Object(R.jsx)("li",{children:Object(R.jsxs)("div",{className:"labelinh",children:[Object(R.jsxs)("div",{className:"clickinh",children:[Object(R.jsxs)("div",{className:"postcoordFlex",onClick:e.entityType===s.Real?t.selectionChanged.bind(t,e.id):t.selectionChangedWithCombinedCode.bind(t,e.theCode,e.id,e.title,e.entityType),children:[Object(R.jsx)("div",{className:"entityTheCode",children:Object(R.jsx)(M,{destinationEntity:e})}),Object(R.jsx)("div",{className:"titleinh",dangerouslySetInnerHTML:{__html:e.title}})]}),void 0!==e.matchingPVs&&0!==e.matchingPVs.length&&void 0!==t.state.displayedPVs[e.id]&&Object(R.jsxs)("div",{className:"postcoordPvs",children:[1===t.state.displayedPVs[e.id]&&Object(R.jsxs)("div",{children:[Object(R.jsx)("span",{dangerouslySetInnerHTML:{__html:e.matchingPVs[0].label}}),"\xa0",e.matchingPVs.length>1&&Object(R.jsx)("span",{className:"detailsicon",title:y.l("Show all"),onClick:t.handleOpenPVs.bind(t,e.id,e.matchingPVs.length),children:be.unicodeIcons.show})]}),t.state.displayedPVs[e.id]>1&&e.matchingPVs.map((function(i,s){return Object(R.jsxs)("div",{children:[Object(R.jsx)("span",{dangerouslySetInnerHTML:{__html:i.label}}),"\xa0",e.matchingPVs.length>1&&0===s&&Object(R.jsx)("span",{className:"detailsicon",title:y.l("Hide"),onClick:t.handleClosePVs.bind(t,e.id),children:be.unicodeIcons.hide})]},t.realAxisName+"_PV_"+s+"_"+e.id)}))]})]}),void 0!==e.descendants&&e.descendants.length>0&&Object(R.jsx)("ul",{children:t.renderDescendantsRecursively(e.descendants)})]})},t.realAxisName+"_"+e.id)}))}},{key:"render",value:function(){return Object(R.jsx)("div",{className:"postcoordAction",children:void 0!==this.props.scaleEntity&&Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"postcoordSearch",children:[Object(R.jsxs)("div",{className:"rtitle",children:[y.l(this.realAxisName),Object(R.jsx)("span",{className:"rsubtitle",children:"true"===this.props.requiredPostcoordination.toLowerCase()?" ("+y.l("code also")+")":" ("+y.l("use additional code, if desired .")+")"})]}),!0===this.state.searchAvailable&&Object(R.jsx)("div",{className:"postcoordSearchInput",children:Object(R.jsx)("input",{type:"text",placeholder:y.l("search in axis")+": "+y.l(this.realAxisName),onInput:this.handleSearch,onClick:this.toggleSearchResult.bind(this,!0)})}),!0===this.state.searchShowResult&&void 0!==this.state.searchResult&&Object(R.jsx)("div",{className:"postcoordSearchInputToResult",children:Object(R.jsxs)("div",{className:"postcoordSearchResult",children:[Object(R.jsx)("div",{className:"closeSearch",onClick:this.toggleSearchResult.bind(this,!1),children:be.unicodeIcons.close}),Object(R.jsxs)("ul",{className:"postcoordSearchResultList topul",children:[!1===this.state.searchIsFinished&&Object(R.jsxs)("li",{children:[Object(R.jsx)("span",{className:"empty",children:"\xa0"}),Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]})]}),!0===this.state.searchResult.error&&Object(R.jsx)("span",{className:"defaultErrorAlert searchError",children:this.state.searchResult.errorMessage}),!1===this.state.searchResult.error&&void 0!==this.state.searchResult.destinationEntities&&this.state.searchResult.destinationEntities.length>0&&this.renderDescendantsRecursively(this.state.searchResult.destinationEntities),!1===this.state.searchResult.error&&void 0!==this.state.searchResult.destinationEntities&&0===this.state.searchResult.destinationEntities.length&&!0===this.state.searchIsFinished&&Object(R.jsxs)("li",{children:[Object(R.jsx)("span",{className:"empty",children:"\xa0"}),Object(R.jsx)("em",{className:"found",children:y.l("No results found!")})]})]}),Object(R.jsx)("div",{className:"clearfix"})]})}),Object(R.jsx)(ie,{rootEntityIds:this.props.scaleEntity.map((function(e,t){return b.convertInCustomDomainURI(e)})),openEntityFromUri:void 0!==this.props.autoPostcoordinationUriToOpenInHierarchy?b.convertInCustomDomainURI(this.props.autoPostcoordinationUriToOpenInHierarchy):void 0,openEntityFromHierarchyNode:this.state.openEntityFromHierarchyNode,handleSelectNode:this.selectionChanged,showAdoptedChildren:!0===be.displayOtherFoundationChildren&&this.state.isPostcoordinationFromXCodeChapter})]})})})}}]),i}(p.Component),ne=se,oe=function(){function e(t,i){Object(h.a)(this,e),this.separatorAmp="&",this.separatorSlash="/",this.postcoordinatedCode={stemcode:"",uri:""},this.postcoordinatedCode.stemcode=t,this.postcoordinatedCode.uri=i}return Object(l.a)(e,[{key:"getStemcode",value:function(){return this.postcoordinatedCode.stemcode}},{key:"getStemUri",value:function(){return this.postcoordinatedCode.uri}},{key:"addXChapter",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AllowAlways",s=arguments.length>2?arguments[2]:void 0;if(void 0===s)t=this.postcoordinatedCode;else{var n=this.getOtherIndex(s);void 0!==n&&void 0!==this.postcoordinatedCode.others&&(t=this.postcoordinatedCode.others[n])}if(void 0!==t)if(void 0===t.xChapters)t.xChapters=[e];else if("AllowAlways"===i||"AllowedExceptFromSameBlock"===i){for(var o=!1,r=t.xChapters.length,a=0;a<t.xChapters.length;a++)t.xChapters[a].axis!==e.axis||t.xChapters[a].extensionCode!==e.extensionCode?t.xChapters[a].axis===e.axis&&(r=a+1):o=!0;o||t.xChapters.splice(r,0,e)}else if("NotAllowed"===i){for(var c=!1,d=0;d<t.xChapters.length;d++)t.xChapters[d].axis===e.axis&&(t.xChapters[d]=e,c=!0);c||t.xChapters.push(e)}}},{key:"removeXChapter",value:function(e,t){var i;if(void 0===t)i=this.postcoordinatedCode;else{var s=this.getOtherIndex(t);void 0!==s&&void 0!==this.postcoordinatedCode.others&&(i=this.postcoordinatedCode.others[s])}if(void 0!==i&&void 0!==i.xChapters)for(var n=0;n<i.xChapters.length;n++)i.xChapters[n].axis===e.axis&&i.xChapters[n].extensionCode===e.extensionCode&&i.xChapters.splice(n,1)}},{key:"removeXChapterByCode",value:function(e,t){var i;if(void 0===t)i=this.postcoordinatedCode;else if(void 0!==this.postcoordinatedCode.others)for(var s=0;s<this.postcoordinatedCode.others.length;s++)if(this.postcoordinatedCode.others[s].stemcode===t){i=this.postcoordinatedCode.others[s];break}if(void 0!==i&&void 0!==i.xChapters)for(var n=0;n<i.xChapters.length;n++)i.xChapters[n].extensionCode===e&&i.xChapters.splice(n,1)}},{key:"getXChapters",value:function(){return this.postcoordinatedCode.xChapters}},{key:"addOther",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AllowAlways";if(void 0===this.postcoordinatedCode.others)this.postcoordinatedCode.others=[e];else if("AllowAlways"===t){for(var i=!1,s=0;s<this.postcoordinatedCode.others.length;s++)this.postcoordinatedCode.others[s].axis===e.axis&&this.postcoordinatedCode.others[s].stemcode===e.stemcode&&(i=!0);i||this.postcoordinatedCode.others.push(e)}else if("NotAllowed"===t){for(var n=!1,o=0;o<this.postcoordinatedCode.others.length;o++)this.postcoordinatedCode.others[o].axis===e.axis&&(this.postcoordinatedCode.others[o]=e,n=!0);n||this.postcoordinatedCode.others.push(e)}}},{key:"removeOther",value:function(e){if(void 0!==this.postcoordinatedCode.others)for(var t=0;t<this.postcoordinatedCode.others.length;t++)this.postcoordinatedCode.others[t].axis===e.axis&&this.postcoordinatedCode.others[t].stemcode===e.stemcode&&this.postcoordinatedCode.others.splice(t,1)}},{key:"getOthers",value:function(){return this.postcoordinatedCode.others}},{key:"getOtherIndex",value:function(e){if(void 0!==this.postcoordinatedCode.others)for(var t=0;t<this.postcoordinatedCode.others.length;t++)if(this.postcoordinatedCode.others[t].axis===e.axis&&this.postcoordinatedCode.others[t].stemcode===e.stemcode)return t}},{key:"initXChapterToOther",value:function(e){if(void 0!==this.postcoordinatedCode.others)for(var t=0;t<this.postcoordinatedCode.others.length;t++)if(this.postcoordinatedCode.others[t].axis===e.axis&&this.postcoordinatedCode.others[t].stemcode===e.stemcode){this.postcoordinatedCode.others[t].xChapters=[];break}}},{key:"changeStemcode",value:function(e,t){""!==e&&(this.postcoordinatedCode.stemcode=e,this.postcoordinatedCode.uri=t)}},{key:"changeOtherStemcode",value:function(e,t,i){if(""!==t&&void 0!==this.postcoordinatedCode.others)for(var s=0;s<this.postcoordinatedCode.others.length;s++)if(this.postcoordinatedCode.others[s].stemcode===e){this.postcoordinatedCode.others[s].stemcode=t,this.postcoordinatedCode.others[s].uri=i;break}}},{key:"setAsSimplifiedCode",value:function(e){if(void 0===e)this.postcoordinatedCode.simplifiedCode=!0;else if(void 0!==this.postcoordinatedCode.others)for(var t=0;t<this.postcoordinatedCode.others.length;t++)if(this.postcoordinatedCode.others[t].stemcode===e){this.postcoordinatedCode.others[t].simplifiedCode=!0;break}}},{key:"toCode",value:function(){var e=this.postcoordinatedCode.stemcode;if(void 0!==this.postcoordinatedCode.xChapters)for(var t=0;t<this.postcoordinatedCode.xChapters.length;t++)e+=this.separatorAmp+this.postcoordinatedCode.xChapters[t].extensionCode;if(void 0!==this.postcoordinatedCode.others)for(var i=0;i<this.postcoordinatedCode.others.length;i++){e+=this.separatorSlash+this.postcoordinatedCode.others[i].stemcode;var s=this.postcoordinatedCode.others[i];if(void 0!==s.xChapters)for(var n=0;n<s.xChapters.length;n++)e+=this.separatorAmp+s.xChapters[n].extensionCode}return e}},{key:"toURI",value:function(){var e=this.postcoordinatedCode.uri;if(void 0!==this.postcoordinatedCode.xChapters)for(var t=0;t<this.postcoordinatedCode.xChapters.length;t++)e+=" "+this.separatorAmp+" "+this.postcoordinatedCode.xChapters[t].uri;if(void 0!==this.postcoordinatedCode.others)for(var i=0;i<this.postcoordinatedCode.others.length;i++){e+=" "+this.separatorSlash+" "+this.postcoordinatedCode.others[i].uri;var s=this.postcoordinatedCode.others[i];if(void 0!==s.xChapters)for(var n=0;n<s.xChapters.length;n++)e+=" "+this.separatorAmp+" "+s.xChapters[n].uri}return e}},{key:"toURIWithHTML",value:function(){var e=this.postcoordinatedCode.uri;if(void 0!==this.postcoordinatedCode.xChapters)for(var t=0;t<this.postcoordinatedCode.xChapters.length;t++)e+=' <span class="codedelimamp">'+this.separatorAmp+"</span> "+this.postcoordinatedCode.xChapters[t].uri;if(void 0!==this.postcoordinatedCode.others)for(var i=0;i<this.postcoordinatedCode.others.length;i++){e+=' <span class="codedelimsl">'+this.separatorSlash+"</span> "+this.postcoordinatedCode.others[i].uri;var s=this.postcoordinatedCode.others[i];if(void 0!==s.xChapters)for(var n=0;n<s.xChapters.length;n++)e+=' <span class="codedelimamp">'+this.separatorAmp+"</span> "+s.xChapters[n].uri}return'<span class="icdcodewpc">'+e+"</span>"}},{key:"toHTML",value:function(){var e="";if(e=void 0!==this.postcoordinatedCode.simplifiedCode&&!0===this.postcoordinatedCode.simplifiedCode?'<span class="stemcodestyle simplifiedcode" title="'+y.l("The code has been simplified")+'">'+this.postcoordinatedCode.stemcode+"</span>":'<span class="stemcodestyle">'+this.postcoordinatedCode.stemcode+"</span>",void 0!==this.postcoordinatedCode.xChapters)for(var t=0;t<this.postcoordinatedCode.xChapters.length;t++)e+='<span class="codedelimamp">'+this.separatorAmp+'</span><span class="xchaptercodestyle">'+this.postcoordinatedCode.xChapters[t].extensionCode+"</span>";if(void 0!==this.postcoordinatedCode.others)for(var i=0;i<this.postcoordinatedCode.others.length;i++){if(void 0!==this.postcoordinatedCode.others[i].entityType&&this.postcoordinatedCode.others[i].entityType===s.UnderShoreLineLogicallyDefined){var n=this.postcoordinatedCode.others[i].stemcode.split("&");e+='<span class="codedelimsl">'+this.separatorSlash+'</span><span class="othercodestyle">'+n[0]+'</span><span class="codedelimamp">'+this.separatorAmp+'</span><span class="xchaptercodestyle">'+n[1]+"</span>"}else e+='<span class="codedelimsl">'+this.separatorSlash+"</span>",void 0!==this.postcoordinatedCode.others[i].simplifiedCode&&!0===this.postcoordinatedCode.others[i].simplifiedCode?e+='<span class="othercodestyle simplifiedcode" title="'+y.l("The code has been simplified")+'">'+this.postcoordinatedCode.others[i].stemcode+"</span>":e+='<span class="othercodestyle">'+this.postcoordinatedCode.others[i].stemcode+"</span>";var o=this.postcoordinatedCode.others[i];if(void 0!==o.xChapters)for(var r=0;r<o.xChapters.length;r++)e+='<span class="codedelimamp">'+this.separatorAmp+'</span><span class="xchaptercodestyle">'+o.xChapters[r].extensionCode+"</span>"}return'<span class="icdcodewpc">'+e+"</span>"}},{key:"toString",value:function(e){var t=e;if(void 0!==this.postcoordinatedCode.xChapters)for(var i=0;i<this.postcoordinatedCode.xChapters.length;i++)t+=" ["+this.postcoordinatedCode.xChapters[i].title+"]";if(void 0!==this.postcoordinatedCode.others)for(var s=0;s<this.postcoordinatedCode.others.length;s++){t+=" "+this.separatorSlash+" "+this.postcoordinatedCode.others[s].title;var n=this.postcoordinatedCode.others[s];if(void 0!==n.xChapters)for(var o=0;o<n.xChapters.length;o++)t+=" ["+n.xChapters[o].title+"]"}return t}}],[{key:"getXChapterToOtherPostcoordinationScale",value:function(e){for(var t=v.cloneDeep(e),i=0;i<t.length;i++){var s=t[i].axisName;"hasCausingCondition"!==(s=s.substr(s.lastIndexOf("/")+1))&&"associatedWith"!==s&&"hasManifestation"!==s||(t.splice(i,1),i--)}return t}}]),e}(),re=function(){function e(){Object(h.a)(this,e),this.modeUri="uri",this.modeCode="code",this.postcoordinatedCode=void 0}return Object(l.a)(e,[{key:"parseUri",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.parse(t,this.modeUri));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseCode",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.parse(t,this.modeCode));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parse",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s,n,o,r,a,d,l,h,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=v.trim(t),s=i===this.modeUri?" / ":"/",n=i===this.modeUri?" & ":"&",o={},r=t.split(s),a=0;case 6:if(!(a<r.length)){e.next=43;break}if(d=r[a].split(n),0!==a){e.next=12;break}return e.next=11,this.getEntity(d[0],i);case 11:o=e.sent;case 12:l=0;case 13:if(!(l<d.length)){e.next=40;break}return e.next=16,this.getEntity(d[0],i);case 16:return h=e.sent,e.next=19,this.getEntity(d[l],i);case 19:if(p=e.sent,0!==a){e.next=30;break}if(0!==l){e.next=26;break}return e.next=24,this.parseStemEntity(o);case 24:e.next=28;break;case 26:return e.next=28,this.parseXChapterEntity(h,p);case 28:e.next=37;break;case 30:if(0!==l){e.next=35;break}return e.next=33,this.parseOtherEntity(o,h);case 33:e.next=37;break;case 35:return e.next=37,this.parseOtherXChapterEntity(o,h,p);case 37:l++,e.next=13;break;case 40:a++,e.next=6;break;case 43:return e.abrupt("return",this.postcoordinatedCode);case 44:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getEntity",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s="",i!==this.modeUri){e.next=5;break}s=v.trim(t),e.next=10;break;case 5:return n=v.trim(t),e.next=8,this.getCodeInfo(n);case 8:o=e.sent,s=void 0!==o.stemId?o.stemId:"";case 10:return e.next=12,b.getICDAPIEntity(b.convertInDomainURI(s));case 12:return r=e.sent,e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getCodeInfo",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.trim(t),e.next=3,b.getICDAPICode(t);case 3:return void 0===(i=e.sent).code&&(alert("ERROR "+i),console.error("ERROR "+i)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseStemEntity",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==t.code&&void 0!==t.uri&&(this.postcoordinatedCode=new oe(t.code,t.uri));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseXChapterEntity",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s,n,o,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.postcoordinationScale){e.next=22;break}if(void 0===i.code||void 0===i.uri){e.next=22;break}return e.next=4,this.getCodeInfo(this.postcoordinatedCode.getStemcode()+"&"+i.code);case 4:s=e.sent,n=0;case 6:if(!(n<t.postcoordinationScale.length)){e.next=22;break}if(o=t.postcoordinationScale[n].axisName.substr(t.postcoordinationScale[n].axisName.lastIndexOf("/")+1),r=v.upperFirst(v.lowerCase(o)),e.prev=9,!(o in s)){e.next=14;break}return a={axis:r,extensionCode:i.code,uri:b.convertInDomainURI(i.uri),title:b.getMultilingualValue(i.title)},this.postcoordinatedCode.addXChapter(a,t.postcoordinationScale[n].allowMultipleValues),e.abrupt("break",22);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("error during parseXChapterEntity in PostcoordinatedCodeParser (due to an empty codeInfo)");case 19:n++,e.next=6;break;case 22:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(t,i){return e.apply(this,arguments)}}()},{key:"parseOtherEntity",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s,n,o,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.postcoordinationScale){e.next=22;break}if(void 0===i.code||void 0===i.uri){e.next=22;break}return e.next=4,this.getCodeInfo(this.postcoordinatedCode.getStemcode()+"/"+i.code);case 4:s=e.sent,n=0;case 6:if(!(n<t.postcoordinationScale.length)){e.next=22;break}if(o=t.postcoordinationScale[n].axisName.substr(t.postcoordinationScale[n].axisName.lastIndexOf("/")+1),r=v.upperFirst(v.lowerCase(o)),e.prev=9,!(o in s)){e.next=14;break}return a={axis:r,stemcode:i.code,uri:b.convertInDomainURI(i.uri),title:b.getMultilingualValue(i.title)},this.postcoordinatedCode.addOther(a,t.postcoordinationScale[n].allowMultipleValues),e.abrupt("break",22);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("error during parseOtherEntity in PostcoordinatedCodeParser (due to an empty codeInfo)");case 19:n++,e.next=6;break;case 22:case"end":return e.stop()}}),e,this,[[9,16]])})));return function(t,i){return e.apply(this,arguments)}}()},{key:"parseOtherXChapterEntity",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i,s){var n,o,r,a,d,l,h,p,u,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.postcoordinationScale){e.next=31;break}if(void 0===i.code||void 0===i.uri){e.next=31;break}return e.next=4,this.getCodeInfo(this.postcoordinatedCode.getStemcode()+"/"+i.code);case 4:n=e.sent,o=0;case 6:if(!(o<t.postcoordinationScale.length)){e.next=31;break}if(r=t.postcoordinationScale[o].axisName.substr(t.postcoordinationScale[o].axisName.lastIndexOf("/")+1),a=v.upperFirst(v.lowerCase(r)),!(r in n)){e.next=28;break}if(d={axis:a,stemcode:i.code,uri:b.convertInDomainURI(i.uri),title:b.getMultilingualValue(i.title)},void 0===i.postcoordinationScale){e.next=27;break}if(void 0===s.code||void 0===s.uri){e.next=27;break}return e.next=15,this.getCodeInfo(i.code+"&"+s.code);case 15:l=e.sent,h=0;case 17:if(!(h<i.postcoordinationScale.length)){e.next=27;break}if(p=i.postcoordinationScale[h].axisName.substr(i.postcoordinationScale[h].axisName.lastIndexOf("/")+1),u=v.upperFirst(v.lowerCase(p)),!(p in l)){e.next=24;break}return m={axis:u,extensionCode:s.code,uri:b.convertInDomainURI(s.uri),title:b.getMultilingualValue(s.title)},this.postcoordinatedCode.addXChapter(m,i.postcoordinationScale[h].allowMultipleValues,d),e.abrupt("break",27);case 24:h++,e.next=17;break;case 27:return e.abrupt("break",31);case 28:o++,e.next=6;break;case 31:case"end":return e.stop()}}),e,this)})));return function(t,i,s){return e.apply(this,arguments)}}()}]),e}(),ae=re,ce=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).maxElementDefault=5,n.markdownPlaceholder="!markdown",n.postcoordinatedCode=void 0,n.isBrowserEntityDetailsMounted=!1,n.callsCounter=0,n.previousBrowserContentURI="",void 0===n.props.autoPostcoordination&&(n.postcoordinatedCode=new oe(void 0!==n.props.entityFromAPI.code?n.props.entityFromAPI.code:"",void 0!==n.props.entityFromAPI.uri?b.convertInDomainURI(n.props.entityFromAPI.uri):"")),n.state={postcoordinatedCode:n.postcoordinatedCode,postcoordinationIsMandatory:void 0!==v.find(n.props.entityFromAPI.postcoordinationScale,{requiredPostcoordination:"true"}),definitionFromMarkdown:null,exclusionsData:[],ancestorExclusionsDisplayed:!1,ancestorExclusionsData:[],matchingIndexTermsDisplayed:n.maxElementDefault,matchingIndexTermsData:n.setStateForMatchingIndexTermsData(),codedElsewhereData:[],ancestorCodingNoteDisplayed:!1,ancestorCodingNoteData:[],relatedMaternalData:[],relatedPerinatalData:[],autoPostcoordinationUriForPCA:{},othersPostcoordinationScaleCache:{}},n.handleClickAllMatchingIndexTerms=n.handleClickAllMatchingIndexTerms.bind(Object(N.a)(n)),n.handleClickAncestorExclusions=n.handleClickAncestorExclusions.bind(Object(N.a)(n)),n.handleClickOneAncestorExclusionsDetail=n.handleClickOneAncestorExclusionsDetail.bind(Object(N.a)(n)),n.handleClickAncestorCodingNote=n.handleClickAncestorCodingNote.bind(Object(N.a)(n)),n.handleClickOneAncestorCodingNoteDetail=n.handleClickOneAncestorCodingNoteDetail.bind(Object(N.a)(n)),n.changePostcoordinatedCode=n.changePostcoordinatedCode.bind(Object(N.a)(n)),n.changePostcoordinatedCodeWithCombinedCode=n.changePostcoordinatedCodeWithCombinedCode.bind(Object(N.a)(n)),n.selectEntityAndCloseBrowser=n.selectEntityAndCloseBrowser.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isBrowserEntityDetailsMounted=!0,this.previousBrowserContentURI=void 0!==this.props.entityFromAPI.uri?this.props.entityFromAPI.uri:"",void 0!==this.props.autoPostcoordination&&this.manageAutoPostcoordination(),this.getters(),this.callbackBrowserLoaded();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){this.props.entityFromAPI.uri===e.entityFromAPI.uri&&this.props.autoPostcoordination===e.autoPostcoordination||(this.postcoordinatedCode=new oe(void 0!==this.props.entityFromAPI.code?this.props.entityFromAPI.code:"",void 0!==this.props.entityFromAPI.uri?b.convertInDomainURI(this.props.entityFromAPI.uri):""),this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode,definitionFromMarkdown:null,exclusionsData:[],ancestorExclusionsDisplayed:!1,ancestorExclusionsData:[],matchingIndexTermsDisplayed:this.maxElementDefault,matchingIndexTermsData:this.setStateForMatchingIndexTermsData(),codedElsewhereData:[],ancestorCodingNoteDisplayed:!1,ancestorCodingNoteData:[],relatedMaternalData:[],relatedPerinatalData:[],autoPostcoordinationUriForPCA:{},othersPostcoordinationScaleCache:{}}),void 0!==this.props.autoPostcoordination&&this.manageAutoPostcoordination(),this.getters()),this.callbackBrowserChanged()}},{key:"componentWillUnmount",value:function(){this.isBrowserEntityDetailsMounted=!1}},{key:"setStateForMatchingIndexTermsData",value:function(){if(void 0!==this.props.isEmbeddedBrowser&&!0===this.props.isEmbeddedBrowser&&void 0!==this.props.entityFromSearch)return this.props.entityFromSearch.matchingPVs}},{key:"callbackBrowserLoaded",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==i.firstLoad||void 0===ye.browserLoadedFunction){e.next=10;break}t=0;case 2:if(!(this.callsCounter>0&&t<=5e3)){e.next=8;break}return e.next=5,b.timeout(100);case 5:t+=100,e.next=2;break;case 8:i.firstLoad=!1,ye.browserLoadedFunction();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"callbackBrowserChanged",value:function(){if(!1===i.firstLoad&&void 0!==ye.browserChangedFunction&&void 0!==this.postcoordinatedCode){var e=this.postcoordinatedCode.toURI(),t=this.postcoordinatedCode.toCode();e!==this.previousBrowserContentURI&&(this.previousBrowserContentURI=e,ye.browserChangedFunction({iNo:this.props.iNo,uri:e,code:t}))}}},{key:"handleClickAllMatchingIndexTerms",value:function(){void 0!==this.state.matchingIndexTermsData&&this.isBrowserEntityDetailsMounted&&this.setState({matchingIndexTermsDisplayed:this.state.matchingIndexTermsDisplayed===this.state.matchingIndexTermsData.length?this.maxElementDefault:this.state.matchingIndexTermsData.length})}},{key:"handleClickAncestorExclusions",value:function(){this.isBrowserEntityDetailsMounted&&this.setState({ancestorExclusionsDisplayed:!this.state.ancestorExclusionsDisplayed})}},{key:"handleClickOneAncestorExclusionsDetail",value:function(e){var t=this.state.ancestorExclusionsData;t[e].parentDisplayed=!t[e].parentDisplayed,this.isBrowserEntityDetailsMounted&&this.setState({ancestorExclusionsData:t})}},{key:"handleClickAncestorCodingNote",value:function(){this.isBrowserEntityDetailsMounted&&this.setState({ancestorCodingNoteDisplayed:!this.state.ancestorCodingNoteDisplayed})}},{key:"handleClickOneAncestorCodingNoteDetail",value:function(e){var t=this.state.ancestorCodingNoteData;t[e].parentDisplayed=!t[e].parentDisplayed,this.isBrowserEntityDetailsMounted&&this.setState({ancestorCodingNoteData:t})}},{key:"manageAutoPostcoordination",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.props.autoPostcoordination){e.next=26;break}return this.callsCounter++,e.next=4,(new ae).parseCode(this.props.autoPostcoordination.codeWithPostcoordination);case 4:if(t=e.sent,this.callsCounter--,this.postcoordinatedCode=t,void 0===(i=this.postcoordinatedCode.getOthers())){e.next=20;break}s=0;case 10:if(!(s<i.length)){e.next=20;break}return this.callsCounter++,e.next=14,b.getICDAPIEntity(i[s].uri);case 14:n=e.sent,this.callsCounter--,void 0!==n&&void 0!==(o=n).postcoordinationScale&&void 0!==(r=oe.getXChapterToOtherPostcoordinationScale(o.postcoordinationScale))&&r.length>0&&(void 0===i[s].xChapters&&this.postcoordinatedCode.initXChapterToOther(i[s]),void 0===this.state.othersPostcoordinationScaleCache[i[s].stemcode]&&(this.state.othersPostcoordinationScaleCache[i[s].stemcode]=r));case 17:s++,e.next=10;break;case 20:a={},void 0!==(d=this.postcoordinatedCode.getXChapters())&&d.map((function(e,t){a[e.axis]=b.convertInCustomDomainURI(e.uri)})),void 0!==(l=this.postcoordinatedCode.getOthers())&&l.map((function(e,t){a[e.axis]=b.convertInCustomDomainURI(e.uri)})),this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode,autoPostcoordinationUriForPCA:a});case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"changePostcoordinatedCode",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i,s,n){var o,r,a,d,l,h,p,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.postcoordinatedCode){e.next=5;break}return e.next=3,b.getICDAPIEntity(i);case 3:void 0!==(o=e.sent)&&(a=void 0!==(r=o).code?r.code:"",d=void 0!==r.classKind?r.classKind:"",l=b.getMultilingualValue(r.title),""===a||"category"!==d?alert(y.l("IGNORED as the selection does not have a code and therefore cannot be used as a postcoordination value")):("X"===a.charAt(0)?(h={axis:t,extensionCode:a,uri:b.convertInDomainURI(i),title:l},void 0===n?this.postcoordinatedCode.addXChapter(h,s):this.postcoordinatedCode.addXChapter(h,s,n)):(p={axis:t,stemcode:a,uri:b.convertInDomainURI(i),title:l},this.postcoordinatedCode.addOther(p,s),void 0!==r.postcoordinationScale&&void 0!==(u=oe.getXChapterToOtherPostcoordinationScale(r.postcoordinationScale))&&u.length>0&&(this.postcoordinatedCode.initXChapterToOther(p),void 0===this.state.othersPostcoordinationScaleCache[a]&&(this.state.othersPostcoordinationScaleCache[a]=u))),this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode}),this.checkSimplifiedCode()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,i,s,n){return e.apply(this,arguments)}}()},{key:"removePostcoordinatedCode",value:function(e,t,i){if(void 0!==this.postcoordinatedCode&&""!==e&&""!==t){if("X"===t.charAt(0)){var s={axis:e,extensionCode:t,uri:""};void 0===i?this.postcoordinatedCode.removeXChapter(s):this.postcoordinatedCode.removeXChapter(s,i)}else{var n={axis:e,stemcode:t,uri:""};this.postcoordinatedCode.removeOther(n)}this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode})}}},{key:"checkSimplifiedCode",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h,p,u,m,y,f,x,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.postcoordinatedCode){e.next=47;break}return e.next=3,b.getICDAPICode(this.postcoordinatedCode.toCode());case 3:if(void 0===(t=e.sent)){e.next=47;break}if(""===(s=void 0!==(i=t).simplifiedCode?i.simplifiedCode:"")){e.next=47;break}if(-1===s.indexOf("/")&&-1===s.indexOf("&")){e.next=41;break}n=s.split("/"),o=this.postcoordinatedCode.toCode().split("/"),r=0;case 12:if(!(r<n.length)){e.next=39;break}if(0!==r){e.next=26;break}if(n[0]===o[0]){e.next=24;break}return a=n[0].split("&"),d=o[0].split("&"),e.next=19,this.getNewURIForSimplifiedStemCode(a[0]);case 19:for(l=e.sent,this.postcoordinatedCode.changeStemcode(a[0],l),h=v.difference(d,a),p=1;p<h.length;p++)this.postcoordinatedCode.removeXChapterByCode(h[p]);this.postcoordinatedCode.setAsSimplifiedCode();case 24:e.next=36;break;case 26:if(n[r]===o[r]){e.next=36;break}return u=n[r].split("&"),m=o[r].split("&"),e.next=31,this.getNewURIForSimplifiedStemCode(u[0]);case 31:for(y=e.sent,this.postcoordinatedCode.changeOtherStemcode(m[0],u[0],y),f=v.difference(m,u),x=1;x<f.length;x++)this.postcoordinatedCode.removeXChapterByCode(f[x],u[0]);this.postcoordinatedCode.setAsSimplifiedCode(u[0]);case 36:r++,e.next=12;break;case 39:e.next=46;break;case 41:return e.next=43,this.getNewURIForSimplifiedStemCode(s);case 43:g=e.sent,this.postcoordinatedCode=new oe(s,g),this.postcoordinatedCode.setAsSimplifiedCode();case 46:this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode});case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNewURIForSimplifiedStemCode",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",e.next=3,b.getICDAPICode(t);case 3:return void 0!==(s=e.sent)&&(i=void 0!==(n=s).stemId?n.stemId:""),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changePostcoordinatedCodeWithCombinedCode",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==this.postcoordinatedCode&&(this.postcoordinatedCode.addOther(t,i),this.isBrowserEntityDetailsMounted&&this.setState({postcoordinatedCode:this.postcoordinatedCode}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"getPostcoordinatedFoundationURI",value:function(e){var t="";if(void 0!==this.state.postcoordinatedCode&&"category"===this.props.entityFromAPI.classKind){if(t=b.convertAllInFoudationURI(this.state.postcoordinatedCode.toURI()),void 0!==this.props.entityFromSearch)if(void 0!==this.props.propertyValueSelected&&void 0!==this.props.propertyValueSelected.foundationUri){var i=t.replace(b.convertAllInFoudationURI(this.props.entityFromSearch.id),this.props.propertyValueSelected.foundationUri);t=b.convertAllInFoudationURI(i)}else if(!1===this.props.entityFromSearch.titleIsTopScore&&void 0!==this.props.entityFromSearch.matchingPVs&&this.props.entityFromSearch.matchingPVs.length>0&&void 0!==this.props.entityFromSearch.matchingPVs[0].foundationUri){var s=t.replace(b.convertAllInFoudationURI(this.props.entityFromSearch.id),this.props.entityFromSearch.matchingPVs[0].foundationUri);t=b.convertAllInFoudationURI(s)}e&&(t=v.replace(t,new RegExp(" & ","g"),' <span class="codedelimamp">&</span> '),t='<span class="icdcodewpc">'+(t=v.replace(t,new RegExp(" / ","g"),' <span class="codedelimsl">/</span> '))+"</span>")}return t}},{key:"getters",value:function(){this.processDefinition(),this.getExclusions(),this.getAncestorExclusions(),this.getCodedElsewhere(),this.getAncestorCodingNote(),this.getRelatedMaternal(),this.getRelatedPerinatal()}},{key:"processDefinition",value:function(){var e=this,t=b.getMultilingualValue(this.props.entityFromAPI.definition);-1!==t.indexOf(this.markdownPlaceholder)&&(t=t.replace(this.markdownPlaceholder,""),V().use(H).use(z).use(_).use(L).process(t,(function(t,i){e.isBrowserEntityDetailsMounted&&e.setState({definitionFromMarkdown:String(i)})})))}},{key:"getExclusions",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.exclusion&&this.props.entityFromAPI.exclusion.length>0)){e.next=26;break}for(t=[],i=0;i<this.props.entityFromAPI.exclusion.length;i++)s=this.props.entityFromAPI.exclusion[i],n=void 0!==s.linearizationReference?s.linearizationReference:"",!0===b.isFoundationCodingTool()&&(n=void 0!==s.foundationReference?s.foundationReference:""),o=b.getMultilingualValue(s.label),t.push({id:n,title:o,code:""});this.isBrowserEntityDetailsMounted&&this.setState({exclusionsData:t}),r=0;case 5:if(!(r<t.length)){e.next=25;break}if(""===t[r].id){e.next=22;break}return a=t[r].id,d="",e.prev=9,this.callsCounter++,e.next=13,b.getICDAPIEntity(a);case 13:l=e.sent,this.callsCounter--,void 0!==l&&""===(d=void 0!==(h=l).code?h.code:"")&&"block"===h.classKind&&(d=void 0!==h.codeRange?h.codeRange:""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),d="\u2754";case 21:t[r].code=d;case 22:r++,e.next=5;break;case 25:this.isBrowserEntityDetailsMounted&&this.setState({exclusionsData:t});case 26:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAncestorExclusions",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h,p,u,v,m,y,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isBrowserEntityDetailsMounted&&this.setState({ancestorExclusionsDisplayed:!1}),void 0===this.props.entityFromAPI.uri){e.next=47;break}return t=[],this.callsCounter++,e.next=6,b.getLinearizationAncestors(this.props.entityFromAPI.uri);case 6:i=e.sent,this.callsCounter--,s=0;case 9:if(!(s<i.length)){e.next=46;break}if(n=i[s],o=b.getMultilingualValue(n.title),r=void 0!==n.code?n.code:"",void 0===(a=n.exclusion)){e.next=43;break}d=0;case 16:if(!(d<a.length)){e.next=43;break}if(l=a[d],h=void 0!==l.linearizationReference?l.linearizationReference:"",""===(p=void 0!==l.foundationReference?l.foundationReference:"")){e.next=40;break}u=0;case 22:if(!(u<t.length)){e.next=29;break}if(p!==t[u].foundationUri){e.next=26;break}return p="",e.abrupt("break",29);case 26:u++,e.next=22;break;case 29:if(""===p){e.next=40;break}if(v=b.getMultilingualValue(l.label),m="",""===h){e.next=39;break}return this.callsCounter++,e.next=36,b.getICDAPIEntity(h);case 36:y=e.sent,this.callsCounter--,void 0!==y&&""===(m=void 0!==(f=y).code?f.code:"")&&"block"===f.classKind&&(m=void 0!==f.codeRange?f.codeRange:"");case 39:t.push({id:h,foundationUri:p,title:v,code:m,parentTitle:o,parentCode:r,parentDisplayed:!1});case 40:d++,e.next=16;break;case 43:s++,e.next=9;break;case 46:this.isBrowserEntityDetailsMounted&&this.setState({ancestorExclusionsData:t});case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCodedElsewhere",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o,r,a,d,l,h,p,u,v,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("window"===this.props.entityFromAPI.classKind){e.next=39;break}if(t=[],void 0!==this.props.entityFromAPI.foundationChildElsewhere&&this.props.entityFromAPI.foundationChildElsewhere.length>0){for(i=0;i<this.props.entityFromAPI.foundationChildElsewhere.length;i++)s=this.props.entityFromAPI.foundationChildElsewhere[i],n=void 0!==s.linearizationReference?s.linearizationReference:"",o=b.getMultilingualValue(s.label),t.push({id:n,title:o,code:""});this.isBrowserEntityDetailsMounted&&this.setState({codedElsewhereData:t})}if(!(void 0!==this.props.entityFromAPI.child&&this.props.entityFromAPI.child.length>0)){e.next=16;break}r=0;case 5:if(!(r<this.props.entityFromAPI.child.length)){e.next=15;break}return this.callsCounter++,e.next=9,b.getICDAPIEntity(this.props.entityFromAPI.child[r]);case 9:a=e.sent,this.callsCounter--,void 0!==a&&"window"===(void 0!==(d=a).classKind?d.classKind:"")&&(l=this.props.entityFromAPI.child[r]," ",h=b.getMultilingualValue(d.title),t.unshift({id:l,title:h,code:" "}));case 12:r++,e.next=5;break;case 15:this.isBrowserEntityDetailsMounted&&this.setState({codedElsewhereData:t});case 16:if(!(t.length>0)){e.next=39;break}p=0;case 18:if(!(p<t.length)){e.next=38;break}if(""===t[p].id||" "===t[p].code){e.next=35;break}return u=t[p].id,v="",e.prev=22,this.callsCounter++,e.next=26,b.getICDAPIEntity(u);case 26:m=e.sent,this.callsCounter--,void 0!==m&&(""===(v=void 0!==(y=m).code?y.code:"")&&"block"===y.classKind&&(v=void 0!==y.codeRange?y.codeRange:""),""===v&&"window"===y.classKind&&(v=" ")),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(22),v="\u2754";case 34:t[p].code=v;case 35:p++,e.next=18;break;case 38:this.isBrowserEntityDetailsMounted&&this.setState({codedElsewhereData:t});case 39:case"end":return e.stop()}}),e,this,[[22,31]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAncestorCodingNote",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isBrowserEntityDetailsMounted&&this.setState({ancestorCodingNoteDisplayed:!1}),void 0===this.props.entityFromAPI.uri){e.next=10;break}return t=[],this.callsCounter++,e.next=6,b.getLinearizationAncestors(this.props.entityFromAPI.uri);case 6:i=e.sent,this.callsCounter--,i.forEach((function(e){var i=b.getMultilingualValue(e.codingNote);if(""!==i&&i!==b.getMultilingualValue(s.props.entityFromAPI.codingNote)){for(var n=0;n<t.length;n++)if(i===t[n].codingNote){i="";break}if(""!==i){var o=b.getMultilingualValue(e.title),r=void 0!==e.code?e.code:"";t.push({codingNote:i,parentTitle:o,parentCode:r,parentDisplayed:!1})}}})),this.isBrowserEntityDetailsMounted&&this.setState({ancestorCodingNoteData:t});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedMaternal",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.relatedEntitiesInMaternalChapter&&this.props.entityFromAPI.relatedEntitiesInMaternalChapter.length>0)){e.next=5;break}return e.next=3,this.getRelatedEntitiesData(this.props.entityFromAPI.relatedEntitiesInMaternalChapter);case 3:t=e.sent,this.isBrowserEntityDetailsMounted&&this.setState({relatedMaternalData:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedPerinatal",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==this.props.entityFromAPI.relatedEntitiesInPerinatalChapter&&this.props.entityFromAPI.relatedEntitiesInPerinatalChapter.length>0)){e.next=5;break}return e.next=3,this.getRelatedEntitiesData(this.props.entityFromAPI.relatedEntitiesInPerinatalChapter);case 3:t=e.sent,this.isBrowserEntityDetailsMounted&&this.setState({relatedPerinatalData:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getRelatedEntitiesData",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,n,o,r,a,d,l,h,p,u,v,m,y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],n=0;case 2:if(!(n<t.length)){e.next=45;break}return o=t[n],r="",a="",d=!1,e.prev=7,this.callsCounter++,e.next=11,b.getICDAPILookup(o);case 11:if(l=e.sent,this.callsCounter--,void 0===l){e.next=36;break}if(o=void 0!==(h=l).uri?h.uri:"",r=void 0!==h.code?h.code:"",a=b.getMultilingualValue(h.title),void 0===h.postcoordinationScale){e.next=36;break}p=0;case 20:if(!(p<h.postcoordinationScale.length)){e.next=36;break}if("associatedWith"!==(u=(u=h.postcoordinationScale[p].axisName).substr(u.lastIndexOf("/")+1))){e.next=33;break}return v=this.props.entityFromAPI.uri,m=b.getMultilingualValue(this.props.entityFromAPI.title),y=this.props.entityFromAPI.code,void 0!==this.props.entityFromSearch&&this.props.entityFromSearch.entityType!==s.Real&&this.props.entityFromSearch.theCode.includes("&")&&(v=this.props.entityFromSearch.id,m=k.removeHtmlTags(this.props.entityFromSearch.title),y=this.props.entityFromSearch.theCode),o=o+" / "+v,a=a+" / "+m,r=r+"/"+y,d=!0,e.abrupt("break",36);case 33:p++,e.next=20;break;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(7),r="\u2754";case 41:i.push({id:o,title:a,code:r,postcoordinated:d});case 42:n++,e.next=2;break;case 45:return e.abrupt("return",i);case 46:case"end":return e.stop()}}),e,this,[[7,38]])})));return function(t){return e.apply(this,arguments)}}()},{key:"selectEntityAndCloseBrowser",value:function(e){if(void 0!==this.postcoordinatedCode){var t=U.fromBrowser(this.props.entityFromAPI,this.props.entityFromSearch,this.postcoordinatedCode,this.props.propertyValueSelected,this.props.iNo);this.props.handleSelectEntity(t,this.props.entityFromSearch,e),void 0!==this.props.handleCloseBrowser&&this.props.handleCloseBrowser()}}},{key:"render",value:function(){var e,t,i=this;return void 0!==this.postcoordinatedCode&&(e=this.postcoordinatedCode.getXChapters(),t=this.postcoordinatedCode.getOthers()),Object(R.jsxs)("div",{children:[!1===be.viewSelectedURI&&!1===b.isFoundationCodingTool()&&void 0!==this.props.entityFromAPI.source&&!0!==b.isEntityResidualOther(this.props.entityFromAPI.source)&&!0!==b.isEntityResidualUnspecified(this.props.entityFromAPI.source)&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"messageright",children:[Object(R.jsxs)("span",{className:"idclass",children:[y.l("Foundation URI"),": ",this.props.entityFromAPI.source]}),!0===b.usesBetaMinorVersion()&&Object(R.jsx)("a",{className:"orangetextbutton",target:"_blank",title:y.l("direct link to maintenance platform"),href:this.props.entityFromAPI.browserUrl,children:be.unicodeIcons.externalLink})]}),Object(R.jsx)("div",{className:"clearfix"})]}),!0===b.isFoundationCodingTool()&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"messageright",children:Object(R.jsxs)("span",{className:"idclass",children:[y.l("Foundation URI"),": ",this.props.entityFromAPI["@id"]]})}),Object(R.jsx)("div",{className:"clearfix"})]}),(void 0!==this.props.entityFromAPI.code&&"category"===this.props.entityFromAPI.classKind||void 0!==this.props.enableSelectButton&&this.props.enableSelectButton===w.AllButRoot&&this.props.entityFromAPI.uri!==b.getRootUri()||void 0!==this.props.enableSelectButton&&this.props.enableSelectButton===w.All)&&Object(R.jsx)("div",{className:"postcoordSticky",children:Object(R.jsxs)("div",{className:"postcoordForSelection",children:[Object(R.jsxs)("div",{children:[void 0!==this.state.postcoordinatedCode&&"category"===this.props.entityFromAPI.classKind&&Object(R.jsxs)("div",{className:"postcoordForSelectionLeft",children:[Object(R.jsxs)("span",{className:"postcoordColored",children:[y.l("Code"),": "]}),Object(R.jsx)("span",{id:"clipboard_"+this.state.postcoordinatedCode.toCode(),className:"postcoordCode",dangerouslySetInnerHTML:{__html:this.state.postcoordinatedCode.toHTML()},title:y.l("Select")+" "+this.state.postcoordinatedCode.toCode(),onClick:this.selectEntityAndCloseBrowser.bind(this,"code")})]}),void 0!==this.props.enableSelectButton&&this.props.enableSelectButton!==w.None&&this.props.enableSelectButton!==w.Default&&Object(R.jsx)("div",{className:"postcoordForSelectionRight",children:Object(R.jsxs)("button",{title:y.l("Select")+(void 0!==this.state.postcoordinatedCode?" "+this.state.postcoordinatedCode.toCode():""),onClick:this.selectEntityAndCloseBrowser.bind(this,"code"),children:[be.unicodeIcons.select," ",y.l("Select")]})}),Object(R.jsx)("div",{className:"clearfix"})]}),!0===be.viewSelectedURI&&void 0!==this.state.postcoordinatedCode&&"category"===this.props.entityFromAPI.classKind&&Object(R.jsxs)("div",{className:"postcoorForSelectionURI",children:[Object(R.jsxs)("span",{className:"postcoordColored",children:[y.l("Foundation URI"),": "]}),Object(R.jsx)("span",{id:"clipboard_URI_"+this.state.postcoordinatedCode.toCode(),className:"postcoordURI",dangerouslySetInnerHTML:{__html:this.getPostcoordinatedFoundationURI(!0)},title:y.l("Select")+" "+this.getPostcoordinatedFoundationURI(!1),onClick:this.selectEntityAndCloseBrowser.bind(this,"uri")})]})]})}),void 0!==this.props.propertyValueSelected&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Selected term")}),Object(R.jsxs)("div",{className:"property",children:[Object(R.jsx)("span",{dangerouslySetInnerHTML:{__html:this.props.propertyValueSelected.label}}),!1===be.viewSelectedURI&&void 0!==this.props.propertyValueSelected.foundationUri&&this.props.entityFromAPI.source!==this.props.propertyValueSelected.foundationUri&&Object(R.jsxs)("span",{className:"idclass2",children:[y.l("Foundation URI"),": ",this.props.propertyValueSelected.foundationUri]})]})]}),void 0!==this.props.entityFromAPI.fullySpecifiedName&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Fully Specified Name")}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.fullySpecifiedName)})]}),void 0!==this.props.entityFromAPI.definition&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Description")}),null===this.state.definitionFromMarkdown&&Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.definition)}),null!==this.state.definitionFromMarkdown&&Object(R.jsx)("div",{className:"property",children:Object(R.jsx)("span",{className:"markdownDefinition",dangerouslySetInnerHTML:{__html:this.state.definitionFromMarkdown}})})]}),void 0!==this.props.entityFromAPI.longDefinition&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Additional Information")}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.longDefinition)})]}),void 0!==this.props.entityFromAPI.inclusion&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Inclusions")}),Object(R.jsx)("div",{className:"property",children:this.props.entityFromAPI.inclusion.map((function(e,t){return Object(R.jsxs)("div",{children:[" ",b.getMultilingualValue(e.label)]},i.props.entityFromAPI.code+"_inclusion_"+t)}))})]}),void 0!==this.props.entityFromAPI.exclusion&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Exclusions")}),Object(R.jsx)("div",{className:"property",children:void 0!==this.state.exclusionsData&&this.state.exclusionsData.length>0&&this.state.exclusionsData.map((function(e,t){return Object(R.jsxs)("div",{children:[e.title,!1===b.isFoundationCodingTool()&&Object(R.jsxs)("span",{children:[""!==e.id&&""===e.code&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),""!==e.id&&""!==e.code&&Object(R.jsxs)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,void 0),title:y.l("Browse"),children:["(",e.code,")"]})]}),!0===b.isFoundationCodingTool()&&""!==e.id&&Object(R.jsx)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,void 0),title:y.l("Browse"),children:"\u21d2"})]},i.props.entityFromAPI.code+"_excl_"+t)}))})]}),this.state.ancestorExclusionsData.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"propertyHeader",children:[y.l("Exclusions from above levels"),Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAncestorExclusions,children:[!0===this.state.ancestorExclusionsDisplayed&&Object(R.jsxs)("span",{children:[y.l("Hide all")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),!1===this.state.ancestorExclusionsDisplayed&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.state.ancestorExclusionsData.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})]}),Object(R.jsx)("div",{className:"property",children:!0===this.state.ancestorExclusionsDisplayed&&this.state.ancestorExclusionsData.map((function(e,t){return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{children:[e.title,!1===b.isFoundationCodingTool()&&""!==e.id&&Object(R.jsxs)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,void 0),title:y.l("Browse"),children:["(",e.code,")"]}),!0===b.isFoundationCodingTool()&&""!==e.foundationUri&&Object(R.jsx)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.foundationUri,void 0),title:y.l("Browse"),children:"\u21d2"}),Object(R.jsxs)("a",{className:"showlink",onClick:i.handleClickOneAncestorExclusionsDetail.bind(i,t),title:y.l("Details"),children:[!0===e.parentDisplayed&&Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hideInline}),!1===e.parentDisplayed&&Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.showInline})]}),!0===e.parentDisplayed&&Object(R.jsxs)("span",{children:[" ",Object(R.jsx)("span",{className:"subproperty",children:y.l("from")}),""!==e.parentCode&&Object(R.jsx)("span",{className:"parentcode",children:e.parentCode}),e.parentTitle]})]})},"ancestorExclusion_"+t)}))})]}),void 0!==this.props.isEmbeddedBrowser&&!0===this.props.isEmbeddedBrowser&&void 0!==this.state.matchingIndexTermsData&&this.state.matchingIndexTermsData.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"propertyHeader",children:[y.l("Matching Terms"),this.state.matchingIndexTermsData.length>this.maxElementDefault&&Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAllMatchingIndexTerms,children:[this.state.matchingIndexTermsDisplayed===this.state.matchingIndexTermsData.length&&Object(R.jsxs)("span",{children:[y.l("Hide")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),this.state.matchingIndexTermsDisplayed!==this.state.matchingIndexTermsData.length&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.state.matchingIndexTermsData.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})]}),Object(R.jsx)("div",{className:"property",children:this.state.matchingIndexTermsData.map((function(e,t){return t<i.state.matchingIndexTermsDisplayed&&Object(R.jsx)("div",{children:Object(R.jsx)("span",{dangerouslySetInnerHTML:{__html:e.label}})},i.props.entityFromAPI.code+"_indexTermsFound_"+t)}))})]}),"window"!==this.props.entityFromAPI.classKind&&void 0!==this.props.entityFromAPI.foundationChildElsewhere&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Coded Elsewhere")}),Object(R.jsx)("div",{className:"property",children:void 0!==this.state.codedElsewhereData&&this.state.codedElsewhereData.length>0&&this.state.codedElsewhereData.map((function(e,t){return Object(R.jsxs)("div",{children:[e.title,""!==e.id&&""===e.code&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),""!==e.id&&""!==e.code&&Object(R.jsx)("span",{children:Object(R.jsxs)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,void 0),title:y.l("Browse"),children:["(",e.code,")"]})})]},i.props.entityFromAPI.code+"_elsewhere_"+t)}))})]}),void 0!==this.props.entityFromAPI.relatedEntitiesInMaternalChapter&&this.props.entityFromAPI.relatedEntitiesInMaternalChapter.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Related categories in maternal chapter")}),Object(R.jsx)("div",{className:"property",children:Object(R.jsxs)("span",{children:[0===this.state.relatedMaternalData.length&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),this.state.relatedMaternalData.length>0&&this.state.relatedMaternalData.map((function(e,t){return Object(R.jsxs)("div",{children:[e.title,Object(R.jsx)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,e.postcoordinated?e.code:void 0),title:y.l("Browse"),children:""===e.code?"\u21d2":"("+e.code+")"})]},i.props.entityFromAPI.code+"_relatedMaternal_"+t)}))]})})]}),void 0!==this.props.entityFromAPI.relatedEntitiesInPerinatalChapter&&this.props.entityFromAPI.relatedEntitiesInPerinatalChapter.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader",children:y.l("Related categories in perinatal chapter")}),Object(R.jsx)("div",{className:"property",children:Object(R.jsxs)("span",{children:[0===this.state.relatedPerinatalData.length&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),this.state.relatedPerinatalData.length>0&&this.state.relatedPerinatalData.map((function(e,t){return Object(R.jsxs)("div",{children:[e.title,Object(R.jsx)("span",{className:"showlink",onClick:i.props.handleSetBrowserContent.bind(i,e.id,e.postcoordinated?e.code:void 0),title:y.l("Browse"),children:""===e.code?"\u21d2":"("+e.code+")"})]},i.props.entityFromAPI.code+"_relatedPerinatal_"+t)}))]})})]}),void 0!==this.props.entityFromAPI.codingNote&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader propertyHeaderCodingNote",children:y.l("Coding Note")}),Object(R.jsx)("div",{className:"property",children:b.getMultilingualValue(this.props.entityFromAPI.codingNote)})]}),this.state.ancestorCodingNoteData.length>0&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:void 0!==this.props.entityFromAPI.codingNote?"propertyHeader propertyHeaderCodingNoteSub":"propertyHeader propertyHeaderCodingNote",children:[y.l("Coding Note from above levels"),Object(R.jsxs)("a",{className:"showlink",onClick:this.handleClickAncestorCodingNote,children:[!0===this.state.ancestorCodingNoteDisplayed&&Object(R.jsxs)("span",{children:[y.l("Hide all")," ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hide})]}),!1===this.state.ancestorCodingNoteDisplayed&&Object(R.jsxs)("span",{children:[y.l("Show all")," [",this.state.ancestorCodingNoteData.length,"] ",Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.show})]})]})]}),Object(R.jsx)("div",{className:"property",children:!0===this.state.ancestorCodingNoteDisplayed&&this.state.ancestorCodingNoteData.map((function(e,t){return Object(R.jsx)("div",{children:Object(R.jsxs)("div",{children:[e.codingNote,Object(R.jsxs)("a",{className:"showlink",onClick:i.handleClickOneAncestorCodingNoteDetail.bind(i,t),title:y.l("Details"),children:[!0===e.parentDisplayed&&Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.hideInline}),!1===e.parentDisplayed&&Object(R.jsx)("span",{className:"unicodeicon",children:be.unicodeIcons.showInline})]}),!0===e.parentDisplayed&&Object(R.jsxs)("span",{children:[" ",Object(R.jsx)("span",{className:"subproperty",children:"from"}),""!==e.parentCode&&Object(R.jsx)("span",{className:"parentcode",children:e.parentCode}),e.parentTitle]})]})},"ancestorCodingNote_"+t)}))})]}),void 0!==this.props.entityFromAPI.postcoordinationScale&&this.props.entityFromAPI.postcoordinationScale.length>0&&void 0!==this.props.entityFromAPI.code&&void 0!==this.props.entityFromAPI.title&&Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"propertyHeader propertyHeaderPostcoordination",children:y.l("Postcoordination")}),Object(R.jsxs)("div",{className:"property propertyPostcoordinationSummary",children:[void 0!==e&&e.length>0&&Object(R.jsx)("ul",{className:"pccodeset",children:e.map((function(t,s){var n=!0;return s>0&&void 0!==e&&e[s-1].axis===t.axis&&(n=!1),Object(R.jsxs)("li",{className:!0===n?"axisWithName liFlex":"liFlex",children:[Object(R.jsx)("div",{className:"axis",children:!0===n&&y.l(t.axis)}),Object(R.jsxs)("div",{className:"values",children:[Object(R.jsx)("span",{className:"pccode",children:t.extensionCode}),Object(R.jsx)("span",{className:"pctitle",children:t.title}),Object(R.jsx)("span",{className:"pcdelete",onClick:i.removePostcoordinatedCode.bind(i,t.axis,t.extensionCode,void 0),children:"\u274c"})]})]},t.axis+"_"+t.extensionCode)}))}),void 0!==t&&t.length>0&&Object(R.jsx)("ul",{className:"pccodeset",children:t.map((function(e,s){var n=!0;return s>0&&void 0!==t&&t[s-1].axis===e.axis&&(n=!1),Object(R.jsxs)("li",{className:!0===n?"axisWithName liFlex":"liFlex",children:[Object(R.jsx)("div",{className:"axis",children:!0===n&&y.l(e.axis)}),Object(R.jsxs)("div",{className:"values",children:[Object(R.jsx)("span",{className:"pccode",children:e.stemcode}),Object(R.jsx)("span",{className:"pctitle",children:e.title}),Object(R.jsx)("span",{className:"pcdelete",onClick:i.removePostcoordinatedCode.bind(i,e.axis,e.stemcode,void 0),children:"\u274c"}),void 0!==e.xChapters&&Object(R.jsx)("ul",{className:"pccodeset",children:e.xChapters.map((function(t,s){var n=!0;return s>0&&void 0!==e.xChapters&&e.xChapters[s-1].axis===t.axis&&(n=!1),Object(R.jsxs)("li",{className:!0===n?"axisWithName liFlex":"liFlex",children:[Object(R.jsx)("div",{className:"axis",children:!0===n&&y.l(t.axis)}),Object(R.jsxs)("div",{className:"values",children:[Object(R.jsx)("span",{className:"pccode",children:t.extensionCode}),Object(R.jsx)("span",{className:"pctitle",children:t.title}),Object(R.jsx)("span",{className:"pcdelete",onClick:i.removePostcoordinatedCode.bind(i,t.axis,t.extensionCode,e),children:"\u274c"})]})]},"2level_"+t.axis+"_"+t.extensionCode)}))}),void 0!==e.xChapters&&Object(R.jsx)("div",{className:"property propertyPostcoordination",children:Object(R.jsx)("div",{children:Object(R.jsx)("div",{className:"entityDescriptionPostCoord",children:void 0!==i.state.othersPostcoordinationScaleCache[e.stemcode]&&v.orderBy(i.state.othersPostcoordinationScaleCache[e.stemcode],["requiredPostcoordination"],["desc"]).map((function(t,s){return void 0!==t.scaleEntity&&t.scaleEntity.length>0&&Object(R.jsx)("div",{children:Object(R.jsx)(ne,Object(F.a)(Object(F.a)({},t),{},{changePostcoordinatedCode:i.changePostcoordinatedCode,addToThisOther:e}))},i.props.entityFromAPI.code+"_pca_"+s)}))})})})]})]},e.axis+"_"+e.stemcode)}))})]}),Object(R.jsx)("div",{className:"property propertyPostcoordination",children:Object(R.jsx)("div",{className:"entityDescriptionPostCoord",children:v.orderBy(this.props.entityFromAPI.postcoordinationScale,["requiredPostcoordination"],["desc"]).map((function(e,t){var s,n=v.upperFirst(v.lowerCase(e.axisName.substr(e.axisName.lastIndexOf("/")+1)));return void 0!==i.state.autoPostcoordinationUriForPCA[n]&&(s=i.state.autoPostcoordinationUriForPCA[n]),void 0!==e.scaleEntity&&e.scaleEntity.length>0&&Object(R.jsx)("div",{children:Object(R.jsx)(ne,Object(F.a)(Object(F.a)({},e),{},{changePostcoordinatedCode:i.changePostcoordinatedCode,changePostcoordinatedCodeWithCombinedCode:i.changePostcoordinatedCodeWithCombinedCode,autoPostcoordinationUriToOpenInHierarchy:s}))},i.props.entityFromAPI.code+"_pca_"+t)}))})})]})]})}}]),i}(p.Component);ce.firstLoad=!0;var de=ce,le=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).hierarchyRootURIs=[b.getRootUri()],n.state={error:r.noError,openEntityFromUri:void 0===n.props.openEntityFromUri?n.hierarchyRootURIs[0]:n.props.openEntityFromUri,openEntityFromHierarchyNode:void 0,loadingContent:!0,browserContent:{entityFromAPI:void 0===n.props.browserContent?{}:n.props.browserContent.entityFromAPI,entityFromSearch:void 0===n.props.browserContent?void 0:n.props.browserContent.entityFromSearch,autoPostcoordination:void 0===n.props.browserContent?void 0:n.props.browserContent.autoPostcoordination,propertyValueSelected:void 0===n.props.browserContent?void 0:n.props.browserContent.propertyValueSelected}},n.handleOpenEntityFromHierarchyNode=n.handleOpenEntityFromHierarchyNode.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){void 0===this.state.browserContent.entityFromAPI||v.isEmpty(this.state.browserContent.entityFromAPI)?void 0!==this.state.openEntityFromUri&&this.loadEntityFromAPI(this.state.openEntityFromUri):this.setState({loadingContent:!1})}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.openEntityFromUri&&void 0!==this.props.browserContent&&void 0!==e.browserContent&&(this.props.browserContent.entityFromAPI===e.browserContent.entityFromAPI&&this.props.browserContent.autoPostcoordination===e.browserContent.autoPostcoordination||this.setState({openEntityFromUri:this.props.openEntityFromUri,openEntityFromHierarchyNode:void 0,browserContent:this.props.browserContent}))}},{key:"loadEntityFromAPI",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=14;break}return this.setState({error:r.noError,loadingContent:!0}),e.prev=2,e.next=5,b.getICDAPIEntity(t);case 5:void 0!==(i=e.sent)&&(s={entityFromAPI:i},this.setState({loadingContent:!1,browserContent:s})),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error in loading entity into browser"),console.error(e.t0),this.setState({error:r.default});case 14:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleOpenEntityFromHierarchyNode",value:function(){var e=Object(d.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!==t&&(this.setState({openEntityFromUri:void 0,openEntityFromHierarchyNode:t}),void 0!==this.props.resetBrowserContentFromHierarchyNode&&this.props.resetBrowserContentFromHierarchyNode(),this.loadEntityFromAPI(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isModal",value:function(){return void 0!==this.props.modal&&!0===this.props.modal}},{key:"render",value:function(){return Object(R.jsx)("div",{className:"browser"+(this.isModal()?" browserModal":""),children:Object(R.jsxs)("div",{className:"browserContent",children:[Object(R.jsx)("div",{className:"browserTitle",children:!0===this.isModal()&&void 0!==this.props.handleCloseBrowser&&Object(R.jsx)("span",{className:"browserCloseiconWrapper",children:Object(R.jsx)("span",{className:"closeicon",title:y.l("Close"),onClick:this.props.handleCloseBrowser,children:be.unicodeIcons.close})})}),Object(R.jsxs)("div",{className:"browserBody",children:[Object(R.jsx)("div",{className:"browserBodyLeft",children:Object(R.jsx)(ie,{rootEntityIds:void 0!==this.props.hierarchyRootURIs?this.props.hierarchyRootURIs:this.hierarchyRootURIs,openEntityFromUri:this.state.openEntityFromUri,openEntityFromHierarchyNode:this.state.openEntityFromHierarchyNode,rootTitle:this.props.hierarchyTitle,mainHierachy:!0,showAdoptedChildren:be.displayOtherFoundationChildren,handleSelectNode:this.handleOpenEntityFromHierarchyNode})}),Object(R.jsxs)("div",{className:"browserBodyRight",children:[this.state.error!==r.noError&&Object(R.jsx)("span",{className:"defaultErrorAlert entityDetailsError",children:y.l("ERROR occurred in Loading Content! Please try again by re-opening the entity or refresing the page")}),!0===this.state.loadingContent&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),!1===this.state.loadingContent&&void 0!==this.state.browserContent.entityFromAPI&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("div",{className:"browserBodyTitle",children:[this.state.browserContent.entityFromAPI.code," ",b.getMultilingualValue(this.state.browserContent.entityFromAPI.title)]}),Object(R.jsx)(de,{iNo:this.props.iNo,isEmbeddedBrowser:this.props.isEmbeddedBrowser,enableSelectButton:this.props.enableSelectButton,entityFromAPI:this.state.browserContent.entityFromAPI,entityFromSearch:this.state.browserContent.entityFromSearch,autoPostcoordination:this.state.browserContent.autoPostcoordination,propertyValueSelected:this.state.browserContent.propertyValueSelected,handleOpenBrowser:this.props.handleOpenBrowser,handleCloseBrowser:this.props.handleCloseBrowser,handleSetBrowserContent:this.props.handleSetBrowserContent,handleSelectEntity:this.props.handleSelectEntity})]})]})]})]})})}}]),i}(p.Component),he=le,pe=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;return Object(h.a)(this,i),(n=t.call(this,e,s)).searchService=void 0,n.destinationEntitiesForHighlighting=[],n.searchService=new Z(!1,!0),n.state={searchQuery:"",searchResult:I.resetSearchResult,searchIsFinished:!0,sortType:C.Score,wordlistSortType:C.Score,chFilterDefault:x.inclusionByNo,chFilter:{},includePostcoordination:!0,includeKeywordResult:!0,flexiSearch:!1,flexiSearchAvailable:!1,wordsAvailable:!1,chaptersAvailable:!1,medicalCodingStyleSearch:void 0!==be.medicalCodingStyleSearch?be.medicalCodingStyleSearch:void 0===n.props.embeddedBrowserIno,chapterDistribution:new Array,chaptersWithNoResults:new Array,highlightIndex:-1,showOutput:!1,settingsError:!1,settingsInitialized:!1,customHeight:"",hierarchyTitle:"",enableSelectButton:w.Categories,filterOpen:!1,browserMode:!1,popupMode:!1,simplifiedMode:!1},n.inputChangedFromWordList=n.inputChangedFromWordList.bind(Object(N.a)(n)),n.switchToFlexible=n.switchToFlexible.bind(Object(N.a)(n)),n.handleChFilter=n.handleChFilter.bind(Object(N.a)(n)),n.highlightPrevEntity=n.highlightPrevEntity.bind(Object(N.a)(n)),n.highlightNextEntity=n.highlightNextEntity.bind(Object(N.a)(n)),n.highlightFromMouse=n.highlightFromMouse.bind(Object(N.a)(n)),n.destinationEntitiesSortUpdate=n.destinationEntitiesSortUpdate.bind(Object(N.a)(n)),n.wordListSortUpdate=n.wordListSortUpdate.bind(Object(N.a)(n)),n.filterSwitch=n.filterSwitch.bind(Object(N.a)(n)),n.filterIsActive=n.filterIsActive.bind(Object(N.a)(n)),n.handleSelectEntity=n.handleSelectEntity.bind(Object(N.a)(n)),n.forceSearch=n.forceSearch.bind(Object(N.a)(n)),n.handleOpenBrowser=n.handleOpenBrowser.bind(Object(N.a)(n)),n.handleCloseBrowser=n.handleCloseBrowser.bind(Object(N.a)(n)),n.handleSetBrowserContent=n.handleSetBrowserContent.bind(Object(N.a)(n)),n.resetBrowserContentFromHierarchyNode=n.resetBrowserContentFromHierarchyNode.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){this.setState({highlightIndex:-1})}},{key:"initSettings",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n,o=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=Object.assign({},this.state.chFilterDefault),i=be.chaptersFilter.split(";").filter((function(e){return""!==e.trim()})),t)t.hasOwnProperty(s)&&(t[s]=-1!==i.indexOf(s));n=Object.assign({},t),this.setState({settingsError:""===be.apiServerUrl,settingsInitialized:!0,chFilterDefault:t,chFilter:n,subtreesFilter:be.subtreesFilter,popupMode:be.popupMode,simplifiedMode:be.simplifiedMode,flexiSearchAvailable:be.flexisearchAvailable,wordsAvailable:be.wordsAvailable,chaptersAvailable:be.chaptersAvailable,customHeight:be.height,hierarchyTitle:be.hierarchyTitle,enableSelectButton:be.enableSelectButton!==w.Default?be.enableSelectButton:w.Categories}),this.searchService.setSearchByCodeOrURI(be.searchByCodeOrURI),this.setEventListeners(),void 0!==be.overwrite[this.props.iNo]&&v.delay((function(){return o.overwriteSettings()}),10);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwriteSettings",value:function(){var e=be.overwrite[this.props.iNo];if(void 0!==e){var t=Object.assign({},this.state.chFilterDefault);if(void 0!==e.chaptersFilter){var i=e.chaptersFilter.split(";").filter((function(e){return""!==e.trim()}));for(var s in t)t.hasOwnProperty(s)&&(t[s]=-1!==i.indexOf(s))}var n=Object.assign({},t),o=void 0!==e.popupMode?e.popupMode:this.state.popupMode,r=void 0!==e.simplifiedMode?e.simplifiedMode:this.state.simplifiedMode,a=void 0!==e.subtreesFilter?e.subtreesFilter:this.state.subtreesFilter,c=void 0!==e.flexisearchAvailable?e.flexisearchAvailable:this.state.flexiSearchAvailable,d=void 0!==e.wordsAvailable?e.wordsAvailable:this.state.wordsAvailable,l=void 0!==e.chaptersAvailable?e.chaptersAvailable:this.state.chaptersAvailable,h=void 0!==e.height?e.height:this.state.customHeight,p=void 0!==e.hierarchyTitle?e.hierarchyTitle:this.state.hierarchyTitle,u=void 0!==e.enableSelectButton?k.convertEnableSelectButtonStringToEnum(e.enableSelectButton,"EmbeddedCodingTool"):this.state.enableSelectButton;!0===r&&(c=!1,d=!1,l=!1),void 0!==e.searchByCodeOrURI&&this.searchService.setSearchByCodeOrURI(e.searchByCodeOrURI),!0===b.isFoundationCodingTool()&&(d=!1),this.setState({chFilterDefault:t,chFilter:n,popupMode:o,simplifiedMode:r,subtreesFilter:a,flexiSearchAvailable:c,wordsAvailable:d,chaptersAvailable:l,customHeight:h,hierarchyTitle:p,enableSelectButton:u})}}},{key:"updateState",value:function(e){if(!1===this.state.settingsError){var t=e.target;this.inputChanged(t.value)}}},{key:"emptySearchResult",value:function(){var e=I.resetSearchResult;e.resultChopped=!1,e.words=[],this.setState({searchResult:e,chapterDistribution:new Array,chaptersWithNoResults:new Array,selectedCode:void 0})}},{key:"getSearchboxElement",value:function(){return document.querySelector("input.ctw-input[data-ctw-ino='"+this.props.iNo+"']")}},{key:"inputChangedFromWordList",value:function(e,t){var i=this,s=this.getSearchboxElement();if(null!==s){var n=s.value;if(2===e)s.value+=t+" ",n=s.value;else if(1===e){var o=s.value,r=o.lastIndexOf(" ");s.value=(o.substr(0,r)+" "+t).trim()+" ",n=s.value}v.delay((function(){return i.inputChanged(n)}),10),s.focus()}}},{key:"handleChFilter",value:function(e,t){var i=this;if(1===t){var s=this.state.chFilter;s[e]=!this.state.chFilter[e],this.setState({chFilter:s}),this.callService()}else if(2===t){var n=this.state.chFilter;for(var o in n)n[o]&&(n[o]=!1);n[e]=!0,this.setState({chFilter:n}),this.callService()}else 3===t&&(this.chapterFilter(e),v.delay((function(){return i.callService()}),10))}},{key:"inputChanged",value:function(e){if(!0===this.state.flexiSearch&&this.emptySearchResult(),this.setState({flexiSearch:!1}),!1===I.isSearchMinLength(e))return void 0!==this.state.searchResult.destinationEntities&&this.state.searchResult.destinationEntities.length>0&&this.searchService.cancelPreviousRequests(),this.emptySearchResult(),void this.setState({showOutput:!1});this.setState({showOutput:!0}),this.searchService.cancelPreviousRequests()," "!==(e=e.replace(new RegExp("[%]","g"),"")).substr(e.length-1,1)?e+="%":e=e.trim(),this.setState({searchQuery:e,searchIsFinished:!1}),this.callService()}},{key:"switchToFlexible",value:function(){var e=this;this.setState({flexiSearch:!0}),console.log("FlexiSearch is On!"),v.delay((function(){return e.callService()}),10)}},{key:"callService",value:function(){var e=this;this.searchService.throttledRedoSearch(this.state,(function(t){if(e.setState({searchIsFinished:!0}),void 0!==t&&!t.cancelled){if(void 0!==ye.searchEndedFunction&&ye.searchEndedFunction(),t.error){var i={error:!0};i.errorType=t.errorType,i.errorMessage=y.l("An error occurred. Please try again later"),e.setState({searchResult:i})}else e.emptySearchResult(),t.searchResult.destinationEntities=e.destinationEntitiesRemoveDuplicateCodes(t.searchResult.destinationEntities),t.searchResult.destinationEntities=e.destinationEntitiesScoreEnhancement(t.searchResult.destinationEntities),e.setState({searchResult:t.searchResult}),void 0!==t.searchResult.destinationEntities&&t.searchResult.destinationEntities.length>0&&(e.destinationEntitiesForHighlighting=t.searchResult.destinationEntities,e.state.sortType===C.Score&&(e.destinationEntitiesForHighlighting=[],e.destinationEntitiesForHighlighting=v.orderBy(t.searchResult.destinationEntities,["score"],["desc"])),!0===e.destinationEntitiesForHighlighting[0].important||void 0!==v.find(e.destinationEntitiesForHighlighting[0].matchingPVs,{important:!0})?e.setState({highlightIndex:0}):e.setState({highlightIndex:-1}));e.recalculateChapterDistibutions(window.innerHeight-180)}}))}},{key:"destinationEntitiesRemoveDuplicateCodes",value:function(e){var t=[],i=e.filter((function(e){return e.entityType!==s.Real}));if(i.length>0){i=v.orderBy(i,["theCode"],["asc"]);for(var n=0;n<i.length-1;n++)i[n].theCode===i[n+1].theCode&&t.push(i[n].theCode);t.forEach((function(t){v.remove(e,(function(e){return e.theCode===t&&e.entityType===s.PostCoordinationCombination}))}))}return e}},{key:"destinationEntitiesScoreEnhancement",value:function(e){var t=this;return e.forEach((function(e){if(e.descendants.length>0){var i=t.recursiveDescendantsMaxScore(e.descendants,e.score);i>e.score&&(e.score=i)}})),e}},{key:"recursiveDescendantsMaxScore",value:function(e,t){var i=this;return t=Math.max.apply(Math,e.map((function(e){return e.score}))),e.forEach((function(e){if(e.descendants.length>0){var s=i.recursiveDescendantsMaxScore(e.descendants,t);s>t&&(t=s)}})),t}},{key:"recalculateChapterDistibutions",value:function(e){for(var t={},i=this.recursiveDestinationEntities(),s=0;s<this.recursiveDestinationEntities().length;++s){var n=i[s];void 0===t[n.chapter]&&(t[n.chapter]=0),t[n.chapter]++}var o=new Array,r=new Array;for(var a in t)if(t.hasOwnProperty(a)){var c={};c.frequency=t[a],c.frequencyStr=c.frequency.toString(),c.shortName=f.chapterByNo[a],c.code=a,o.push(c)}for(var d in f.chapterByNo)if(void 0===t[d]){var l={frequency:0};void 0===this.state.chFilter||!1===this.state.chFilter[d]?l.frequencyStr="":l.frequencyStr="0",l.shortName=f.chapterByNo[d],l.code=d,r.push(l)}var h=e-80-40*o.length;h<0&&(h=0);for(var p=0,u=o;p<u.length;p++){var v=u[p];v.size=Math.round(40+v.frequency/i.length*h)}this.setState({chapterDistribution:o,chaptersWithNoResults:r})}},{key:"recursiveDestinationEntities",value:function(e,t){if(void 0===t&&(t=[]),void 0===e&&void 0!==this.state.searchResult&&(e=this.state.searchResult.destinationEntities),void 0!==e){var i,s=Object(A.a)(e);try{for(s.s();!(i=s.n()).done;){var n=i.value;-1===t.indexOf(n)&&(t.push(n),void 0!==n.descendants&&n.descendants.length>0&&this.recursiveDestinationEntities(n.descendants,t))}}catch(o){s.e(o)}finally{s.f()}}return t}},{key:"chapterFilter",value:function(e){if("all"===e){var t={};for(var i in this.state.chFilter)this.state.chFilter.hasOwnProperty(i)&&(t[i]=!0);this.setState({chFilter:t})}else if("default"===e){var s=Object.assign({},this.state.chFilterDefault);this.setState({chFilter:s})}else{var n={};for(var o in this.state.chFilter)n[o]=o===e;this.setState({chFilter:n})}}},{key:"setEventListeners",value:function(){var e=this,t=this.getSearchboxElement();null!==t&&(t.addEventListener("input",(function(t){e.updateState(t)})),t.addEventListener("click",(function(){!0===e.state.popupMode&&!1===e.state.showOutput&&I.isSearchMinLength(t.value)&&e.setShowOutputState(!0)})))}},{key:"setShowOutputState",value:function(e){this.state.showOutput!==e&&this.setState({showOutput:e})}},{key:"highlightPrevEntity",value:function(){var e=void 0!==this.destinationEntitiesForHighlighting[this.state.highlightIndex-1]?this.state.highlightIndex-1:-1;-1!==e&&this.setState({highlightIndex:e})}},{key:"highlightNextEntity",value:function(){var e=void 0!==this.destinationEntitiesForHighlighting[this.state.highlightIndex+1]?this.state.highlightIndex+1:-1;-1!==e&&this.setState({highlightIndex:e})}},{key:"highlightFromMouse",value:function(e){-1!==e&&this.setState({highlightIndex:e})}},{key:"destinationEntitiesSortUpdate",value:function(e){e===C.Score?this.destinationEntitiesForHighlighting=v.orderBy(this.destinationEntitiesForHighlighting,["score"],["desc"]):e===C.Alphabetical&&(this.destinationEntitiesForHighlighting=this.state.searchResult.destinationEntities),this.setState({highlightIndex:-1,sortType:e})}},{key:"wordListSortUpdate",value:function(e){this.setState({wordlistSortType:e})}},{key:"filterSwitch",value:function(){this.setState({filterOpen:!this.state.filterOpen})}},{key:"filterIsActive",value:function(){return!v.isEqual(this.state.chFilter,this.state.chFilterDefault)}},{key:"handleSelectEntity",value:function(e,t,i){e.searchQuery=v.trimEnd(this.state.searchQuery,"%");var n=void 0!==t?t.entityType:s.Real;b.sendAnalytics(this.state.searchResult.uniqueSearchId,e.code,e.uri,e.bestMatchText,n),!0===this.state.simplifiedMode&&void 0!==this.props.embeddedBrowserIno?(n===s.UnderShoreLineLogicallyDefined?ye.setBrowserCodeAndSearchResult(this.props.embeddedBrowserIno,e.code,t):ye.setBrowserUriAndSearchResult(this.props.embeddedBrowserIno,e.uri,t),this.setState({showOutput:!1})):void 0!==ye.selectedEntityFunction?ye.selectedEntityFunction(e):void 0!==i&&"uri"===i?(U.copyURIToClipboard(e),this.setState({selectedCode:e.foundationUri})):(U.copyCodeToClipboard(e),this.setState({selectedCode:e.code}))}},{key:"forceSearch",value:function(e){var t=this,i=this.getSearchboxElement();null!==i&&(i.value=e,v.delay((function(){return t.inputChanged(e)}),10))}},{key:"handleOpenBrowser",value:function(e){var t=this.state.showOutput;!0===this.state.popupMode&&(t=!1),this.setState({browserContent:e,browserMode:!0,showOutput:t})}},{key:"handleCloseBrowser",value:function(){this.setState({browserContent:{entityFromAPI:{},entityFromSearch:void 0,autoPostcoordination:void 0},browserMode:!1})}},{key:"handleSetBrowserContent",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={entityFromAPI:{},entityFromSearch:void 0,autoPostcoordination:void 0},void 0===i){e.next=7;break}return e.next=4,(new ae).parseCode(i);case 4:o=e.sent,t=o.getStemUri(),n.autoPostcoordination={entityType:s.PostCoordinationCombination,codeWithPostcoordination:i};case 7:return e.prev=7,e.next=10,b.getICDAPIEntity(t);case 10:void 0!==(r=e.sent)&&(n.entityFromAPI=r,this.handleOpenBrowser(n)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Error during set entity in browser window"),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,i){return e.apply(this,arguments)}}()},{key:"resetBrowserContentFromHierarchyNode",value:function(){this.setState({browserContent:{entityFromAPI:{},entityFromSearch:void 0,autoPostcoordination:void 0}})}},{key:"render",value:function(){var e="ctwFlexItem50";!1===this.state.wordsAvailable&&!1===this.state.filterOpen?e="ctwFlexItem100":!1!==this.state.wordsAvailable&&!1!==this.state.filterOpen&&!0!==this.state.flexiSearch||(e="ctwFlexItem75",!0===this.state.flexiSearch&&!1===this.state.filterOpen&&(e="ctwFlexItem100"));var t={};return t=!0===this.state.popupMode?{maxHeight:"60vh"}:null===this.state.customHeight?{}:{height:this.state.customHeight},!0===this.state.settingsInitialized&&Object(R.jsxs)("div",{className:"ectComponent",children:[void 0!==this.state.searchQuery&&""!==this.state.searchQuery&&void 0!==this.state.searchResult&&!0===this.state.showOutput&&!1===this.state.settingsError&&Object(R.jsx)("div",{className:!0===b.isFoundationCodingTool()?"foundationCodingTool":"",children:Object(R.jsx)("div",{className:!0===this.state.popupMode?"popupMode":"",children:Object(R.jsxs)("div",{className:!0===this.state.popupMode?"popupModeResults":"",children:[!0===this.state.popupMode&&Object(R.jsxs)("div",{className:"popupModeTop",children:[!1===this.state.searchIsFinished&&Object(R.jsxs)("span",{className:"entityLoading",children:[Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."}),Object(R.jsx)("span",{children:"."})]}),Object(R.jsx)("div",{className:"closeicon",onClick:this.setShowOutputState.bind(this,!1),children:be.unicodeIcons.close})]}),Object(R.jsx)("div",{className:"statusdiv",children:Object(R.jsx)($,{guessType:void 0!==this.state.searchResult.guessType?this.state.searchResult.guessType:0,resultChopped:void 0!==this.state.searchResult&&(void 0!==this.state.searchResult.resultChopped&&this.state.searchResult.resultChopped),flexiSearch:this.state.flexiSearch,wordsAvailable:this.state.wordsAvailable,chaptersAvailable:this.state.chaptersAvailable,filterSwitch:this.filterSwitch,filterOpen:this.state.filterOpen,filterIsActive:this.filterIsActive(),error:this.state.searchResult.error,errorMessage:null!==this.state.searchResult.errorMessage?this.state.searchResult.errorMessage:"",errorType:void 0!==this.state.searchResult.errorType?this.state.searchResult.errorType:r.noError,selectedCode:this.state.selectedCode})}),Object(R.jsxs)("div",{id:"ctwFlexContainer",className:"searchresults",children:[!1===this.state.flexiSearch&&!0===this.state.wordsAvailable&&Object(R.jsx)("div",{className:"overflowBox ctwFlexItemPadding ctwFlexItem25",style:t,children:Object(R.jsx)("div",{className:"wordlistdiv",children:Object(R.jsx)(J,{searchViewModel:this.state,inputChangedFromWordList:this.inputChangedFromWordList,wordListSortUpdate:this.wordListSortUpdate})})}),Object(R.jsx)("div",{className:"overflowBox ctwFlexItemPadding "+e,style:t,children:Object(R.jsx)("div",{className:"destinationentitiesdiv",children:Object(R.jsx)(Q,Object(F.a)(Object(F.a)({},this.state),{},{iNo:this.props.iNo,highlightedCurrentId:void 0!==this.destinationEntitiesForHighlighting[this.state.highlightIndex]?this.destinationEntitiesForHighlighting[this.state.highlightIndex].id:"",highlightFromMouse:this.highlightFromMouse,destinationEntitiesSortUpdate:this.destinationEntitiesSortUpdate,switchToFlexible:this.switchToFlexible,handleOpenBrowser:this.handleOpenBrowser,handleCloseBrowser:this.handleCloseBrowser,handleSetBrowserContent:this.handleSetBrowserContent,handleSelectEntity:this.handleSelectEntity}))})}),!0===this.state.filterOpen&&Object(R.jsx)("div",{className:"overflowBox ctwFlexItemPadding ctwFlexItem25",style:t,children:Object(R.jsx)("div",{className:"chapterdistributionandfilterdiv",children:Object(R.jsx)(T,Object(F.a)(Object(F.a)({},this.state),{},{chFilter:this.state.chFilter,filterIsActive:this.filterIsActive(),chapterDistribution:this.state.chapterDistribution,chaptersWithNoResults:this.state.chaptersWithNoResults,handleChFilter:this.handleChFilter}))})})]}),Object(R.jsx)("div",{className:"clearfix"})]})})}),!0===this.state.settingsError&&Object(R.jsxs)("div",{children:["Please set the Property ",Object(R.jsx)("code",{children:"apiServerUrl"})," in your configuration."]}),!0===this.state.browserMode&&Object(R.jsx)(he,{iNo:this.props.iNo,modal:!0,openEntityFromUri:void 0!==this.state.browserContent?this.state.browserContent.entityFromAPI.uri:void 0,browserContent:void 0!==this.state.browserContent?this.state.browserContent:void 0,resetBrowserContentFromHierarchyNode:this.resetBrowserContentFromHierarchyNode,hierarchyTitle:this.state.hierarchyTitle,enableSelectButton:this.state.enableSelectButton,handleOpenBrowser:this.handleOpenBrowser,handleCloseBrowser:this.handleCloseBrowser,handleSetBrowserContent:this.handleSetBrowserContent,handleSelectEntity:this.handleSelectEntity})]})}}]),i}(p.Component),ue=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"set",value:function(t,i){null!==i&&(e.embeddedCodingToolRefs[t]=i,console.log("[EmbeddedCodingTool iNo: "+t+"] set Ref"))}},{key:"forceSearch",value:function(t,i){void 0!==e.embeddedCodingToolRefs[t]&&e.embeddedCodingToolRefs[t].forceSearch(i)}}]),e}();ue.embeddedCodingToolRefs={};var ve=function(e){Object(E.a)(i,e);var t=Object(P.a)(i);function i(e,s){var n;Object(h.a)(this,i),(n=t.call(this,e,s)).innerCodingToolIno="InnerCodingTool "+n.props.iNo,n.innerCodingToolRef=function(e){ue.set(n.innerCodingToolIno,e)},n.innerCodingToolSettings={popupMode:!0,simplifiedMode:!0,searchByCodeOrURI:!0,chaptersFilter:g.toString()};var o=be.browserSearchAvailable,r=be.browserURI,a=be.browserHierarchyRootURIs,c=be.height,d=be.hierarchyTitle,l=be.enableSelectButton!==w.Default?be.enableSelectButton:w.None;if(""===r&&void 0!==a&&a.length>0&&(r=a[0]),void 0!==be.overwrite[n.props.iNo]){var p=be.overwrite[n.props.iNo];o=void 0!==p.browserSearchAvailable?p.browserSearchAvailable:o,r=void 0!==p.browserURI?p.browserURI:r,a=void 0!==p.browserHierarchyRootURIs?p.browserHierarchyRootURIs:a,c=void 0!==p.height?p.height:c,d=void 0!==p.hierarchyTitle?p.hierarchyTitle:d,l=void 0!==p.enableSelectButton?k.convertEnableSelectButtonStringToEnum(p.enableSelectButton,"EmbeddedBrowser"):w.None,""===r&&void 0!==a&&a.length>0&&(r=a[0])}return n.state={searchAvailable:o,initialURI:r,hierarchyRootURIs:a,browserContent:{entityFromAPI:{},entityFromSearch:void 0,autoPostcoordination:void 0},firstLoadCompleted:!1,customHeight:c,hierarchyTitle:d,enableSelectButton:l},n.setUri=n.setUri.bind(Object(N.a)(n)),n.handleSetBrowserContent=n.handleSetBrowserContent.bind(Object(N.a)(n)),n.resetBrowserContentFromHierarchyNode=n.resetBrowserContentFromHierarchyNode.bind(Object(N.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t,i,s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.state.hierarchyRootURIs){e.next=12;break}t=Object(B.a)(this.state.hierarchyRootURIs),i=0;case 3:if(!(i<t.length)){e.next=11;break}return e.next=6,b.getTheURI(t[i]);case 6:s=e.sent,t[i]=s;case 8:i++,e.next=3;break;case 11:this.setState({hierarchyRootURIs:t});case 12:if(void 0===this.state.initialURI){e.next=18;break}return e.next=15,b.getTheURI(this.state.initialURI);case 15:n=e.sent,this.setState({initialURI:n}),this.setUri(n);case 18:!0===this.state.searchAvailable&&this.initInnerCodingTool();case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initInnerCodingTool",value:function(){void 0!==this.state.hierarchyRootURIs&&this.state.hierarchyRootURIs.length>0&&(this.innerCodingToolSettings.subtreesFilter=v.join(this.state.hierarchyRootURIs,",")),ue.embeddedCodingToolRefs.hasOwnProperty(this.innerCodingToolIno)&&(ye.overwriteConfiguration(this.innerCodingToolIno,this.innerCodingToolSettings),ue.embeddedCodingToolRefs[this.innerCodingToolIno].initSettings(),console.log("[EmbeddedCodingTool iNo: "+this.innerCodingToolIno+"] init"))}},{key:"setUri",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[EmbeddedBrowser iNo: "+this.props.iNo+"] set URI: "+t),void 0===t){e.next=7;break}return e.next=4,(new ae).parseUri(t);case 4:void 0!==(s=e.sent)&&(void 0===s.getXChapters()&&void 0===s.getOthers()||(n=s.toCode())),this.handleSetEmbeddedBrowserContent(t,n,i);case 7:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"setCode",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("[EmbeddedBrowser iNo: "+this.props.iNo+"] set Code: "+t),void 0===t){e.next=6;break}return e.next=4,(new ae).parseCode(t);case 4:s=e.sent,this.handleSetEmbeddedBrowserContent(s.toURI(),t,i);case 6:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"handleSetEmbeddedBrowserContent",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i,n){var o,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={entityFromAPI:{},entityFromSearch:n,autoPostcoordination:void 0},void 0===i){e.next=7;break}return e.next=4,(new ae).parseCode(i);case 4:r=e.sent,t=r.getStemUri(),o.autoPostcoordination={entityType:void 0!==n?n.entityType:s.PostCoordinationCombination,codeWithPostcoordination:i};case 7:return e.prev=7,e.next=10,b.getICDAPIEntity(t);case 10:void 0!==(a=e.sent)&&(o.entityFromAPI=a,this.setState({browserContent:o,firstLoadCompleted:!0})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.error("Error during set entity in browser window"),console.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,i,s){return e.apply(this,arguments)}}()},{key:"handleSetBrowserContent",value:function(){var e=Object(d.a)(c.a.mark((function e(t,i){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleSetEmbeddedBrowserContent(t,i,void 0);case 1:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"handleSelectEntity",value:function(e,t,i){void 0!==ye.selectedEntityFunction?ye.selectedEntityFunction(e):void 0!==i&&"uri"===i?U.copyURIToClipboard(e):U.copyCodeToClipboard(e)}},{key:"resetBrowserContentFromHierarchyNode",value:function(){this.setState({browserContent:{entityFromAPI:{},entityFromSearch:void 0,autoPostcoordination:void 0}})}},{key:"removeLastSlash",value:function(e){return void 0!==e?v.trimEnd(e,"/"):e}},{key:"render",value:function(){var e=null===this.state.customHeight?{}:{height:this.state.customHeight,maxHeight:this.state.customHeight};return Object(R.jsxs)("div",{children:[!0===this.state.searchAvailable&&Object(R.jsxs)("div",{className:"embeddedBrowserSearch",children:[Object(R.jsx)("input",{type:"text",autoComplete:"off",className:"ctw-input embeddedBrowserSearchbox"+(b.getApiInitializationCompleted()?" apiInitializationCompleted":""),"data-ctw-ino":this.innerCodingToolIno,placeholder:y.l("Type for starting the search"),disabled:!b.getApiInitializationCompleted()}),Object(R.jsx)(pe,{iNo:this.innerCodingToolIno,embeddedBrowserIno:this.props.iNo,ref:this.innerCodingToolRef})]}),Object(R.jsx)("div",{className:"ectComponent",children:Object(R.jsx)("div",{className:"embeddedBrowser",style:e,children:!0===this.state.firstLoadCompleted&&Object(R.jsx)(he,{iNo:this.props.iNo,modal:!1,isEmbeddedBrowser:!0,openEntityFromUri:void 0!==this.state.browserContent?this.removeLastSlash(this.state.browserContent.entityFromAPI.uri):void 0,browserContent:this.state.browserContent,resetBrowserContentFromHierarchyNode:this.resetBrowserContentFromHierarchyNode,hierarchyRootURIs:this.state.hierarchyRootURIs,hierarchyTitle:this.state.hierarchyTitle,enableSelectButton:this.state.enableSelectButton,handleSetBrowserContent:this.handleSetBrowserContent,handleSelectEntity:this.handleSelectEntity})})})]})}}]),i}(p.Component),me=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"set",value:function(t,i){null!==i&&(e.embeddedBrowserRefs[t]=i,console.log("[EmbeddedBrowser iNo: "+t+"] set Ref"))}},{key:"setUri",value:function(t,i,s){void 0!==e.embeddedBrowserRefs[t]&&e.embeddedBrowserRefs[t].setUri(i,s)}},{key:"setCode",value:function(t,i,s){void 0!==e.embeddedBrowserRefs[t]&&e.embeddedBrowserRefs[t].setCode(i,s)}}]),e}();me.embeddedBrowserRefs={};i(689);console.log("ECT v1.5 - React v"+p.version);var be=function e(){Object(h.a)(this,e)};be.apiServerUrl="",be.apiSecured=!1,be.icdMinorVersion="",be.icdLinearization="mms",be.language="en",be.sourceApp="",be.autoBind=!0,be.popupMode=!1,be.simplifiedMode=!1,be.wordsAvailable=!0,be.chaptersAvailable=!0,be.chaptersFilter=x.toString(),be.subtreesFilter="",be.flexisearchAvailable=!0,be.searchByCodeOrURI=!1,be.height="",be.hierarchyTitle="",be.enableSelectButton=w.Default,be.browserSearchAvailable=!0,be.browserURI="",be.browserHierarchyRootURIs=void 0,be.displayOtherFoundationChildren=!0,be.medicalCodingStyleSearch=void 0,be.viewSelectedURI=!1,be.overwrite={},be.unicodeIcons={hierarchyCollapsed:"\u25b7",hierarchyCollapsedForRTL:"\u25c1",hierarchyExpanded:"\u25bd",show:"\u25bc",hide:"\u25b2",showInline:"\u25b6",hideInline:"\u25c0",close:"\u2a09",select:"\u2713",externalLink:"\u21aa",availablePostcoordination:"+",mandatoryPostcoordination:"+",maternalChapter:"J",perinatalChapter:"K",codingNote:"\u2630",seeInHierarchy:"\u15d1"};var ye=function(){function e(){Object(h.a)(this,e)}return Object(l.a)(e,null,[{key:"search",value:function(e,t){ue.forceSearch(e,t)}},{key:"clear",value:function(e){ue.forceSearch(e,"")}},{key:"setBrowserUri",value:function(e,t){me.setUri(e,t)}},{key:"setBrowserCode",value:function(e,t){me.setCode(e,t)}},{key:"setBrowserUriAndSearchResult",value:function(e,t,i){me.setUri(e,t,i)}},{key:"setBrowserCodeAndSearchResult",value:function(e,t,i){me.setCode(e,t,i)}},{key:"configure",value:function(t,i){e.disableSearchboxes(),void 0!==t.apiServerUrl&&(be.apiServerUrl=t.apiServerUrl),void 0!==t.apiSecured&&(be.apiSecured=t.apiSecured),void 0!==t.icdMinorVersion&&(be.icdMinorVersion=t.icdMinorVersion),void 0!==t.icdLinearization&&(be.icdLinearization=t.icdLinearization),void 0!==t.language&&(be.language=t.language),void 0!==t.sourceApp&&(be.sourceApp=t.sourceApp),void 0!==t.autoBind&&(be.autoBind=t.autoBind),void 0!==t.popupMode&&(be.popupMode=t.popupMode),void 0!==t.simplifiedMode&&(be.simplifiedMode=t.simplifiedMode),void 0!==t.wordsAvailable&&(be.wordsAvailable=t.wordsAvailable),void 0!==t.chaptersAvailable&&(be.chaptersAvailable=t.chaptersAvailable),void 0!==t.chaptersFilter&&(be.chaptersFilter=t.chaptersFilter),void 0!==t.subtreesFilter&&(be.subtreesFilter=t.subtreesFilter),void 0!==t.flexisearchAvailable&&(be.flexisearchAvailable=t.flexisearchAvailable),void 0!==t.searchByCodeOrURI&&(be.searchByCodeOrURI=t.searchByCodeOrURI),void 0!==t.height&&(be.height=t.height),void 0!==t.hierarchyTitle&&(be.hierarchyTitle=t.hierarchyTitle),void 0!==t.enableSelectButton&&(be.enableSelectButton=k.convertEnableSelectButtonStringToEnum(t.enableSelectButton)),void 0!==t.browserSearchAvailable&&(be.browserSearchAvailable=t.browserSearchAvailable),void 0!==t.browserURI&&(be.browserURI=t.browserURI),void 0!==t.browserHierarchyRootURIs&&(be.browserHierarchyRootURIs=t.browserHierarchyRootURIs),void 0!==t.displayOtherFoundationChildren&&(be.displayOtherFoundationChildren=t.displayOtherFoundationChildren),void 0!==t.medicalCodingStyleSearch&&(be.medicalCodingStyleSearch=t.medicalCodingStyleSearch),void 0!==t.viewSelectedURI&&(be.viewSelectedURI=t.viewSelectedURI),!0===be.simplifiedMode&&(be.wordsAvailable=!1,be.chaptersAvailable=!1,be.flexisearchAvailable=!1),void 0!==i&&(void 0!==i.searchStartedFunction&&(e.searchStartedFunction=i.searchStartedFunction),void 0!==i.searchEndedFunction&&(e.searchEndedFunction=i.searchEndedFunction),void 0!==i.selectedEntityFunction&&(e.selectedEntityFunction=i.selectedEntityFunction),void 0!==i.getNewTokenFunction&&(e.getNewTokenFunction=i.getNewTokenFunction),void 0!==i.browserLoadedFunction&&(e.browserLoadedFunction=i.browserLoadedFunction),void 0!==i.browserChangedFunction&&(e.browserChangedFunction=i.browserChangedFunction)),e.initializeAPI(),e.initializeInterfaceLanguage(),e.autoBind()}},{key:"overwriteConfiguration",value:function(e,t,i){be.overwrite[e]=t,void 0!==i&&!0===i&&ue.embeddedCodingToolRefs.hasOwnProperty(e)&&ue.embeddedCodingToolRefs[e].overwriteSettings()}},{key:"bind",value:function(t){!1===be.autoBind&&(e.bindEmbeddedCodingTool(t),e.bindEmbeddedBrowser(t))}},{key:"initializeAPI",value:function(){var t=Object(d.a)(c.a.mark((function t(){var i,s,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==b.allowCustomSettings){t.next=13;break}return b.allowCustomSettings=!1,b.setServerUrl(be.apiServerUrl),b.setSecured(be.apiSecured),b.setLinearization(be.icdLinearization),b.setMinorVersion(be.icdMinorVersion),b.setLanguage(be.language),b.setSourceApp(be.sourceApp),!0===b.isFoundationCodingTool()&&(be.wordsAvailable=!1),t.next=11,b.getICDAPIEntity(b.getRootUri());case 11:if(void 0!==(i=t.sent)&&(b.setApiInitializationCompleted(),this.dotsTimer.forEach((function(e){clearInterval(e)})),window.document.querySelectorAll("input.ctw-input").forEach((function(t){var i=t.getAttribute("data-ctw-ino");e.enableSearchbox(i)})),void 0!==i.releaseDate&&null!==(s=document.getElementById("ct-releaseDate"))&&(s.innerHTML=i.releaseDate),void 0!==i.child))for(n=0;n<i.child.length;n++)b.getICDAPIEntity(i.child[n]);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeInterfaceLanguage",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.setInterfaceLanguage(),this.isTextDirectionRTL()&&(be.unicodeIcons.hierarchyCollapsed=be.unicodeIcons.hierarchyCollapsedForRTL,t=be.unicodeIcons.showInline,be.unicodeIcons.showInline=be.unicodeIcons.hideInline,be.unicodeIcons.hideInline=t);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isTextDirectionRTL",value:function(){return["ar","he"].includes(be.language)}},{key:"autoBind",value:function(){console.log("autoBind: "+be.autoBind),!0===be.autoBind&&window.addEventListener("load",(function(){console.log("DOM loaded");var t=window.document.querySelectorAll("div.ctw-window");console.log("found "+t.length+" Embedded Coding Tool"),t.forEach((function(t){var i=t.getAttribute("data-ctw-ino");null!==i&&e.bindEmbeddedCodingTool(i)}));var i=window.document.querySelectorAll("div.ctw-eb-window");console.log("found "+i.length+" Embedded Browser"),i.forEach((function(t){var i=t.getAttribute("data-ctw-ino");null!==i&&e.bindEmbeddedBrowser(i)}))}))}},{key:"bindEmbeddedCodingTool",value:function(t){var i=window.document.querySelector("div.ctw-window[data-ctw-ino='"+t+"']");null!==i&&(console.log("[EmbeddedCodingTool iNo: "+t+"] rendering"),u.render(Object(R.jsx)(pe,{iNo:t,ref:function(e){ue.set(t,e)}}),i),ue.embeddedCodingToolRefs.hasOwnProperty(t)&&(ue.embeddedCodingToolRefs[t].initSettings(),console.log("[EmbeddedCodingTool iNo: "+t+"] init")),this.isTextDirectionRTL()&&i.classList.add("rtl"),e.enableSearchbox(t))}},{key:"bindEmbeddedBrowser",value:function(t){var i=window.document.querySelector("div.ctw-eb-window[data-ctw-ino='"+t+"']");null!==i&&(console.log("[EmbeddedBrowser iNo: "+t+"] rendering"),u.render(Object(R.jsx)(ve,{iNo:t,ref:function(e){me.set(t,e)}}),i),this.isTextDirectionRTL()&&i.classList.add("rtl"),e.enableSearchbox(t))}},{key:"disableSearchboxes",value:function(){var e=this;window.document.querySelectorAll("input.ctw-input:not(.embeddedBrowserSearchbox)").forEach((function(t){t.disabled=!0,t.setAttribute(e.dotsTimerPlaceholder,t.placeholder),t.placeholder=t.placeholder+" ";e.dotsTimer.push(setInterval((function(){v.endsWith(t.placeholder,"...")?t.placeholder=t.getAttribute(e.dotsTimerPlaceholder)+" ":t.placeholder=t.placeholder+".",console.log("loading...")}),800))}))}},{key:"enableSearchbox",value:function(e){if(console.log("ICDAPI Initialization Completed: "+b.getApiInitializationCompleted()),b.getApiInitializationCompleted()){var t=window.document.querySelector("input.ctw-input[data-ctw-ino='"+e+"']");null!==t&&(t.disabled=!1,t.classList.contains("apiInitializationCompleted")||t.classList.add("apiInitializationCompleted"),t.hasAttribute(this.dotsTimerPlaceholder)&&(t.placeholder=t.getAttribute(this.dotsTimerPlaceholder),t.removeAttribute(this.dotsTimerPlaceholder)))}}}]),e}();ye.dotsTimer=[],ye.dotsTimerPlaceholder="data-ecttempplaceholder",ye.searchStartedFunction=void 0,ye.searchEndedFunction=void 0,ye.selectedEntityFunction=void 0,ye.getNewTokenFunction=void 0,ye.browserLoadedFunction=void 0,ye.browserChangedFunction=void 0}},[[690,1,2]]])}));
//# sourceMappingURL=main.98eed08a.chunk.js.map