<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Installing ICD-API as a systemd Service in Linux - ICD-API Homepage</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Installing ICD-API as a systemd Service in Linux";
    var mkdocs_page_input_path = "ICDAPI-SystemdService.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <!-- <a href=".." class="icon icon-home"> ICD-API Homepage</a> -->
        <a href="../index.html"> ICD-API Homepage</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="https://icd.who.int/icdapi/docs2/search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption custom-caption"><span class="caption-text">ICD-API Documentation</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="ReleaseNotes/index.html">Release Notes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="APIDoc-Version2.html">API Documentation (version 2.x)</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="APIDoc-Version2.html#icd-api-reference">API Reference (version 2.x)</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="API-Authentication.html">ICD API Authentication</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="SupportedClassifications.html">Supported Classification Versions</a>
                    </li>
                    <li class="toctree-l1"><a class="" href="APIDoc-Version2.html#icd-api-github-repository">Samples Github Repository</a>
                    </li>
                </ul>
                <p class="caption custom-caption"><span class="caption-text">Embedded Classification Tool</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="icd11ect-1.5/index.html">Embedded Classification Tool</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="icd11ect-1.5-EmbeddedCodingTool/index.html">Embedded Coding Tool</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="icd11ect-1.5-EmbeddedBrowser/index.html">Embedded Browser</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="icd11ect-1.5-AdvancedSettings/index.html">Advanced settings</a>
                    </li>
                </ul>
                <p class="caption custom-caption"><span class="caption-text">Installing the ICD-API locally</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="ICDAPI-LocalDeployment.html">General Information on Installing the API locally</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="ICDAPI-DockerContainer.html">Installing ICD-API as a Docker container</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="ICDAPI-WindowsService.html">Installing ICD-API as a Windows Service</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="ICDAPI-SystemdService.html">Installing ICD-API as a systemd Service in Linux</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="ICDAPI-SystemdService.html#prerequisites">Prerequisites</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="ICDAPI-SystemdService.html#steps-for-installing-the-icd-api-as-a-systemd-service">Steps for Installing the ICD-API as a systemd service</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="ICDAPI-SystemdService.html#checking-the-installation">Checking the Installation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="ICDAPI-SystemdService.html#configuration">Configuration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="ICDAPI-SystemdService.html#updating-the-icd-api">Updating the ICD-API</a>
    </li>
    </ul>
                    </li>
                </ul>
                <p class="caption custom-caption"><span class="caption-text">OLD Version Documentation</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="APIDoc-Version1/index.html">API Documentation (version 1)</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ICD-API Homepage</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <!-- <li><a href="..">ICD-API</a> &raquo;</li> -->
    <li><a href="../index.html">ICD-API Homepage</a> &raquo;</li>
    
      
        
          
            <li>Installing the ICD-API locally &raquo;</li>
                    
        
      
    
    <li>Installing ICD-API as a systemd Service in Linux</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="installing-icd-api-as-a-systemd-service-in-linux">Installing ICD-API as a systemd service in Linux</h1>
<p>It is possible to install the ICD-API as a systemd service in Linux. </p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>The binary files provided for Linux are x64 binaries and requires an x64 Linux installation</li>
<li>A Linux system with systemd support. Most of the Linux distributions already have support for systemd services by default. </li>
<li>By installing this package you agree with our <a href="license.html">license agreement</a></li>
</ul>
<h2 id="steps-for-installing-the-icd-api-as-a-systemd-service">Steps for Installing the ICD-API as a systemd service</h2>
<ul>
<li>Download the <a href="https://icdcdn.who.int/icdapibinaries/icdapi-2.2.1.tar.gz">icd-api for linux version 2.2.1</a> package</li>
<li>Copy all files in the tar file to <code>/srv/icdapi</code> folder</li>
<li>Copy <code>icdapi.service</code> file under <code>/etc/systemd/system</code> folder</li>
<li>Edit the <code>icdapi.service</code> file and change <code>User=myusername</code> line to the user that will run the service</li>
<li>run <code>sudo systemctl daemon-reload</code> command so that the new service is known to the system</li>
<li>start the ICD-API by running <code>sudo systemctl start icdapi</code></li>
<li>to enable auto-start after reboot enter <code>sudo systemctl enable icdapi</code></li>
<li>you may use <code>sudo systemctl stop icdapi</code> to stop the service or <code>sudo systemctl status icdapi</code> to see its status.</li>
</ul>
<h2 id="checking-the-installation">Checking the Installation</h2>
<ul>
<li>By default the API is installed at port 6382 so you should be able to access the API from <code>http://&lt;hostname&gt;:6382/icd/...</code> </li>
<li>Since we deploy an instance of the Coding Tool together with the API, visiting the URL <code>http://&lt;hostname&gt;:6382/ct11</code> should open up the ICD-11 Coding Tool.</li>
<li>Similarly, visiting the URL <code>http://&lt;hostname&gt;:6382/browse11</code> should open up the ICD-11 Browser.</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>By default the API runs at port 6382. You could change it by editing the file <code>/srv/icdapi/appsettings.json</code> the line that has : <code>"urls": "http://*:6382"</code></p>
<p>By default the API runs with the latest version of the ICD-11, To change this you may edit the <code>appsettings.json</code> file and change the <code>"include"</code> field.  <br />
Here are some examples:</p>
<ul>
<li><code>"include": "2022-02_en"</code> means 2022-02 version of ICD-11 in English (default)</li>
<li><code>"include": "2022-02_ar-en"</code> means 2022-02 version of ICD-11 in Arabic and English</li>
<li><code>"include": "2021-05_en"</code> means 2021-05 version of ICD-11 in English</li>
</ul>
<p>Available versions and languages of ICD-11 are listed at the <a href="SupportedClassifications.html">supported classifications</a>. ICD-10 is not supported in this release.</p>
<p>If you set the saveAnalytics to true in the appsettings.json file, the software that is installed can send data to WHO on the searches made in order to improve search capability of ICD-11 tools. The data that is sent <strong>does not</strong> contain any ids or IP addresses. </p>
<p><em>You need to restart the service after making any changes to the <code>appsettings.json</code> file</em> </p>
<h2 id="updating-the-icd-api">Updating the ICD-API</h2>
<p>To update the ICD-API that is installed as a systemd service, you need to stop the service (<code>sudo systemctl stop icdapi</code>), replace all files in the tar file to <code>/srv/icdapi</code> folder and restart the service (<code>sudo systemctl start icdapi</code>)</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="APIDoc-Version1/index.html" class="btn btn-neutral float-right" title="API Documentation (version 1)">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="ICDAPI-WindowsService.html" class="btn btn-neutral" title="Installing ICD-API as a Windows Service"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="ICDAPI-WindowsService.html" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="APIDoc-Version1/index.html" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script type="text/javascript" defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
